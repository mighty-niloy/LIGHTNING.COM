<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE LIGHTNING - Premium Fashion Store</title>
    <link rel="icon" href="https://i.imgur.com/tgJQiJe.jpg" type="image/jpeg">
    <!-- Font Awesome for Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts: Poppins (for general text), Montserrat (for headings), Playfair Display (for decorative titles) -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <!-- SweetAlert2 for beautiful alerts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        /* Cosmic Bloom Color Palette & Core Styles */
        :root {
          /* === Base Colors (Light Mode - Clean & Elegant) === */
          --bg-color: #f0f4f7; /* Very light, cool grey-blue */
          --section-bg: #ffffff; /* Crisp, pure white */
          --card-bg: #ffffff;
          --text-color: #212b36; /* Deep, almost black, but with a soft warmth */
          --muted-text: #6b7a8f; /* Muted steel blue-grey */

          /* === Dark Mode Base Definitions (Deep & Immersive) === */
          --dark-bg-color: #121820; /* Ultra deep, almost black, with a hint of blue */
          --dark-section-bg: #1e2832; /* Slightly lighter deep blue-grey */
          --dark-card-bg: #2a3540; /* Medium deep blue-grey for cards */
          --dark-text-color: #e3e8ed; /* Luminous, soft off-white */
          --dark-muted-text: #9eb1c7; /* Muted cool light grey */
          --dark-border-color: #3f5466; /* Subtle dark border */
          --dark-box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6); /* Deeper, more atmospheric shadow */

          /* === Primary Colors (Cosmic Bloom) === */
          --primary-color: #008080; /* Deep Teal - Sophisticated & Calming */
          --secondary-color: #FFBF00; /* Warm Amber-Gold - Inviting & Luxurious */
          --accent-color: #FF00FF; /* Electric Fuchsia - Striking & Energetic */

          /* === Gradients (Dynamic & Multi-Layered) === */
          --gradient-primary: linear-gradient(135deg, #008080, #FFBF00); /* Teal to Amber */
          --gradient-secondary: linear-gradient(135deg, #FF00FF, #008080); /* Fuchsia to Teal */
          --gradient-accent: linear-gradient(135deg, #FFBF00, #FF00FF); /* Amber to Fuchsia */
          --gradient-button-hover: linear-gradient(135deg, #006666, #e6b800); /* Darker/richer for hover */

          /* === UI Elements === */
          --border-radius: 16px; /* Smooth, modern rounding */
          --border-color: #dde1e6; /* Light mode border */
          --box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08); /* Soft, elegant shadow */
          --transition: all 0.5s cubic-bezier(0.65, 0, 0.35, 1); /* Smoother, slightly more dramatic transition */

          /* === Buttons & Highlights === */
          --button-bg: var(--gradient-primary);
          --button-hover-glow: 0 0 25px rgba(0, 128, 128, 0.7), 0 0 40px rgba(255, 191, 0, 0.5); /* Teal & Amber glow */
          --highlight-text-color: var(--accent-color); /* Use Fuchsia for text highlights */
          --highlight-glow: 0 0 18px rgba(255, 0, 255, 0.6); /* Fuchsia glow */
        }

        /* === Dark Mode Activation === */
        /* Apply this class to your <body> or a major container when dark mode is active */
        body.dark-mode {
          --bg-color: var(--dark-bg-color);
          --section-bg: var(--dark-section-bg);
          --card-bg: var(--dark-card-bg);
          --text-color: var(--dark-text-color);
          --muted-text: var(--dark-muted-text);
          --border-color: var(--dark-border-color);
          --box-shadow: var(--dark-box-shadow);
        }

        /* Global Styles & Body */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            overflow-x: hidden; /* Prevent horizontal scroll */
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        button {
            border: none;
            background: none;
            cursor: pointer;
            padding: 0;
            font-family: 'Poppins', sans-serif;
        }

        /* Loading Spinner */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-bg-color); /* Use dark background for loading */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.7s ease-out; /* Slower fade out */
        }

        .loading-spinner {
            width: 70px;
            height: 70px;
            border: 8px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary-color); /* Animated color */
            animation: spin 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite; /* More dynamic spin */
        }

        .loading-text {
            color: white;
            margin-top: 25px;
            font-size: 22px;
            font-weight: 500;
            letter-spacing: 1px;
            animation: pulse 1.5s infinite; /* Gentle pulse */
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Welcome Notification */
        .welcome-notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gradient-primary);
            color: white;
            padding: 15px 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            animation: slideInDown 0.6s forwards cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        @keyframes slideInDown {
            from { transform: translateX(-50%) translateY(-100px); opacity: 0; visibility: hidden; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; visibility: visible; }
        }
        .welcome-notification.hide {
             animation: slideOutUp 0.6s forwards cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        @keyframes slideOutUp {
            from { transform: translateX(-50%) translateY(0); opacity: 1; visibility: visible; }
            to { transform: translateX(-50%) translateY(-100px); opacity: 0; visibility: hidden; }
        }

        /* Floating Message Button */
        .floating-message-btn {
            position: fixed;
            bottom: 160px; /* Above theme toggle */
            right: 30px;
            background: var(--gradient-secondary);
            color: var(--dark-text-color); /* Text color for the secondary gradient */
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 5px 20px rgba(0, 128, 128, 0.4);
            cursor: pointer;
            z-index: 100;
            transition: var(--transition);
        }
        .floating-message-btn:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: var(--button-hover-glow); /* Reuse glow effect */
        }
        .floating-message-btn i {
            color: white; /* Ensure icon is visible on gradient */
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            bottom: 90px;
            right: 30px;
            background: var(--gradient-primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 100;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: var(--button-hover-glow);
        }
        .theme-toggle i {
            color: white;
        }

        /* Header Styles */
        header {
            background: var(--gradient-primary);
            padding: 15px 0;
            color: white;
            position: sticky; /* Changed to sticky */
            top: 0; /* Sticky to top */
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3); /* Stronger shadow */
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
            position: relative;
        }

        .logo-container {
            display: flex;
            align-items: center;
        }

        header img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-right: 15px;
            border: 3px solid var(--secondary-color); /* Thicker border */
            box-shadow: 0 0 15px var(--secondary-color); /* Gold glow */
            animation: pulse 3s infinite ease-in-out; /* Gentle pulse on logo */
        }

        .header-text h1 {
            margin: 0;
            font-size: 28px; /* Larger */
            font-weight: 700;
            font-family: 'Montserrat', sans-serif;
            letter-spacing: 1.5px;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.4); /* Deeper shadow */
            transition: var(--transition);
        }
        .header-text h1:hover {
            color: var(--accent-color); /* Glow on hover */
            text-shadow: 0 0 10px var(--accent-color);
        }

        .header-text p {
            margin: 5px 0 0;
            font-size: 14px; /* Larger */
            opacity: 0.9;
            letter-spacing: 0.8px;
        }

        .user-actions {
            display: flex;
            align-items: center;
            gap: 20px; /* Increased gap */
        }

        .login-btn {
            background: var(--gradient-accent); /* Fuchsia gradient */
            color: white; /* Text white on accent gradient */
            border: none;
            padding: 10px 25px; /* Larger padding */
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--highlight-glow); /* Fuchsia glow */
            font-size: 15px;
        }
        .login-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 30px var(--accent-color); /* Stronger glow on hover */
        }

        marquee {
            background-color: rgba(255, 191, 0, 0.2); /* Amber tint */
            color: var(--secondary-color); /* Amber text */
            padding: 10px 0; /* More padding */
            font-size: 16px; /* Larger font */
            font-weight: 600;
            border-top: 1px solid rgba(255,191,0,0.3);
            border-bottom: 1px solid rgba(255,191,0,0.3);
            animation: fadeIn 0.8s ease-in-out;
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 28px; /* Larger icon */
            cursor: pointer;
            padding: 5px;
            transition: transform 0.3s ease;
        }
        .mobile-menu-toggle:hover {
            transform: rotate(90deg);
        }

        /* Navigation Styles */
        nav {
            background: var(--dark-section-bg); /* Darker background for nav */
            padding: 0;
            position: sticky;
            top: 70px; /* Stick below header */
            z-index: 999;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }
        body.dark-mode nav {
            background: var(--dark-card-bg); /* Slightly different for dark mode */
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
            position: relative;
        }

        .nav-links {
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }

        nav a, .dropbtn { /* Apply styles to both links and dropdown button */
            color: var(--dark-text-color); /* Lighter text for nav */
            margin: 0 12px; /* Increased margin */
            text-decoration: none;
            font-weight: 500;
            padding: 18px 12px; /* More padding for click area */
            transition: var(--transition);
            position: relative;
            font-size: 16px;
            letter-spacing: 0.7px;
            display: inline-flex; /* For icons */
            align-items: center; /* Align icons */
            gap: 8px; /* Space between icon and text */
        }

        nav a:hover, .dropbtn:hover {
            color: var(--primary-color); /* Teal highlight */
            text-shadow: 0 0 5px rgba(0, 128, 128, 0.4); /* Subtle glow */
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 4px; /* Thicker underline */
            background-color: var(--primary-color); /* Teal underline */
            transition: width 0.3s ease-out; /* Smooth slide effect */
        }

        nav a:hover::after, nav a.active::after {
            width: 100%;
        }

        .cart-icon, .wishlist-icon {
            position: relative;
            font-size: 22px; /* Larger icons */
            margin-left: 20px; /* Increased margin */
            transition: var(--transition);
            color: white;
            padding: 5px; /* Make clickable area larger */
        }

        .cart-icon:hover, .wishlist-icon:hover {
            transform: scale(1.15); /* More pronounced scale */
            color: var(--accent-color); /* Fuchsia on hover */
        }

        #cartCount, #wishlistCount {
            background-color: var(--accent-color);
            border-radius: 50%;
            padding: 4px 8px; /* Larger badge */
            font-size: 13px; /* Slightly larger font */
            position: absolute;
            top: -10px; /* Adjusted position */
            right: -10px;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            border: 2px solid var(--dark-bg-color); /* Contrast border */
        }
        body.dark-mode #cartCount, body.dark-mode #wishlistCount {
            border-color: var(--bg-color); /* Contrast border for dark mode */
        }

        /* Dropdown Styles */
        .dropdown {
            position: relative;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--section-bg); /* Use section background */
            min-width: 250px; /* Wider */
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2); /* Deeper shadow */
            z-index: 1;
            border-radius: var(--border-radius);
            overflow: hidden;
            opacity: 0;
            transform: translateY(15px); /* More pronounced slide */
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); /* Smoother transition */
            border-top: 4px solid var(--primary-color); /* Teal top border */
        }
        body.dark-mode .dropdown-content {
            background-color: var(--dark-card-bg);
            border-top-color: var(--secondary-color); /* Amber top border in dark mode */
        }

        .dropdown:hover .dropdown-content {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .dropdown-content a {
            color: var(--text-color);
            padding: 14px 20px; /* More padding */
            text-decoration: none;
            display: block;
            transition: var(--transition);
            border-bottom: 1px solid var(--border-color); /* Dynamic border */
            font-weight: 400;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        body.dark-mode .dropdown-content a {
            border-bottom-color: var(--dark-border-color);
        }

        .dropdown-content a:hover {
            background-color: var(--bg-color); /* Subtle hover background */
            color: var(--primary-color);
            padding-left: 25px; /* Slide effect on hover */
        }
        body.dark-mode .dropdown-content a:hover {
            background-color: var(--dark-section-bg);
            color: var(--secondary-color);
        }

        .dropdown-content a:last-child {
            border-bottom: none;
        }

        /* Advanced Search Bar Styles */
        .search-container {
            display: flex;
            justify-content: center;
            margin: 25px 0;
            padding: 0 20px;
            position: sticky;
            top: 130px; /* Below nav */
            z-index: 900;
            background-color: rgba(240, 244, 247, 0.95); /* Adjusted for light mode */
            backdrop-filter: blur(12px); /* Stronger blur */
            padding: 20px 0; /* More vertical padding */
            border-bottom: 1px solid var(--border-color);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05); /* Subtle shadow */
        }

        body.dark-mode .search-container {
            background-color: rgba(18, 24, 32, 0.95); /* Adjusted for dark mode */
            border-bottom-color: var(--dark-border-color);
        }

        .search-wrapper {
            width: 100%;
            max-width: 900px; /* Wider search bar */
            position: relative;
        }

        .search-box {
            display: flex;
            width: 100%;
            position: relative;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1); /* More prominent shadow */
            border-radius: 50px;
        }

        .search-input {
            width: 100%;
            padding: 15px 25px; /* Larger padding */
            border: 2px solid var(--border-color);
            border-radius: 50px;
            font-size: 17px;
            outline: none;
            transition: var(--transition);
            padding-right: 70px; /* Space for button */
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        body.dark-mode .search-input {
            background-color: var(--dark-card-bg);
            border-color: var(--dark-border-color);
            color: var(--dark-text-color);
        }

        .search-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(0, 128, 128, 0.2); /* Teal focus glow */
        }

        .search-btn {
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            padding: 0 25px; /* Larger padding */
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 0 50px 50px 0; /* Rounded only on right */
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-btn:hover {
            background: var(--gradient-button-hover); /* Darker gradient on hover */
            transform: scale(1.01); /* Subtle scale */
            box-shadow: var(--button-hover-glow); /* Apply hover glow */
        }

        .search-btn i {
            margin-right: 10px; /* Space for icon */
        }

        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            z-index: 100;
            display: none;
            max-height: 450px; /* Taller */
            overflow-y: auto;
            border: 1px solid var(--border-color);
            transform: translateY(10px);
            opacity: 0;
            transition: all 0.3s ease-out;
        }

        body.dark-mode .search-suggestions {
            background-color: var(--dark-card-bg);
            border-color: var(--dark-border-color);
        }

        .search-suggestions.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .suggestion-header {
            padding: 15px 20px; /* More padding */
            font-weight: 600;
            color: var(--primary-color);
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-color);
            font-size: 16px;
            position: sticky; /* Sticky header */
            top: 0;
            z-index: 5;
        }

        body.dark-mode .suggestion-header {
            background-color: var(--dark-section-bg);
            border-bottom-color: var(--dark-border-color);
            color: var(--secondary-color);
        }

        .suggestion-item {
            padding: 15px 20px; /* More padding */
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
            gap: 15px;
        }

        body.dark-mode .suggestion-item {
            border-bottom-color: var(--dark-border-color);
        }

        .suggestion-item:hover {
            background: var(--bg-color);
            transform: translateX(5px); /* Slide on hover */
        }
        body.dark-mode .suggestion-item:hover {
            background-color: var(--dark-section-bg);
        }

        .suggestion-item img {
            width: 50px; /* Larger image */
            height: 50px;
            object-fit: cover;
            border-radius: 8px; /* Slightly rounded */
            border: 1px solid var(--border-color);
        }
        body.dark-mode .suggestion-item img {
            border-color: var(--dark-border-color);
        }

        .suggestion-item .info {
            flex: 1;
        }

        .suggestion-item .name {
            font-weight: 500;
            margin-bottom: 5px;
            font-size: 16px;
            color: var(--text-color);
        }

        .suggestion-item .price {
            color: var(--secondary-color);
            font-weight: 600;
            font-size: 15px;
        }

        .recent-searches {
            padding: 10px 15px;
            border-top: 1px solid var(--border-color);
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        body.dark-mode .recent-searches {
            border-top-color: var(--dark-border-color);
        }

        .recent-search {
            display: inline-block;
            background: var(--bg-color);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }
        body.dark-mode .recent-search {
            background-color: var(--dark-section-bg);
            border-color: var(--dark-border-color);
            color: var(--dark-muted-text);
        }

        .recent-search:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0, 128, 128, 0.2);
        }
        body.dark-mode .recent-search:hover {
            background: var(--gradient-button-hover);
        }

        .search-history-controls {
            display: flex;
            justify-content: flex-end; /* Align to right */
            padding: 10px 15px;
            border-top: 1px solid var(--border-color);
        }
        body.dark-mode .search-history-controls {
            border-top-color: var(--dark-border-color);
        }

        .clear-history {
            color: var(--accent-color); /* Fuchsia color */
            font-size: 14px;
            cursor: pointer;
            transition: var(--transition);
        }

        .clear-history:hover {
            text-decoration: underline;
            color: var(--primary-color);
        }

        /* Filter Sidebar */
        .filter-sidebar {
            position: fixed;
            top: 0;
            left: -400px; /* Wider sidebar */
            width: 400px;
            height: 100%;
            background: var(--section-bg);
            box-shadow: 5px 0 25px rgba(0, 0, 0, 0.2);
            transition: left 0.4s cubic-bezier(0.65, 0, 0.35, 1); /* Smoother animation */
            z-index: 1100;
            overflow-y: auto;
            padding: 30px;
            border-right: 4px solid var(--primary-color); /* Accent border */
        }
        body.dark-mode .filter-sidebar {
            background-color: var(--dark-card-bg);
            border-right-color: var(--secondary-color);
        }

        .filter-sidebar.open {
            left: 0;
        }

        .filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        body.dark-mode .filter-header {
            border-bottom-color: var(--dark-border-color);
        }

        .filter-header h3 {
            margin: 0;
            font-size: 26px; /* Larger */
            color: var(--primary-color);
            font-family: 'Playfair Display', serif;
        }
        body.dark-mode .filter-header h3 {
            color: var(--dark-text-color);
        }

        .close-filter {
            background: none;
            border: none;
            font-size: 30px; /* Larger icon */
            cursor: pointer;
            color: var(--muted-text);
            transition: var(--transition);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-filter:hover {
            color: var(--accent-color); /* Fuchsia on hover */
            background: var(--bg-color);
            transform: rotate(90deg);
        }
        body.dark-mode .close-filter:hover {
            background: var(--dark-section-bg);
        }

        .filter-section {
            margin-bottom: 30px;
            background: var(--bg-color); /* Section background */
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }
        body.dark-mode .filter-section {
            background-color: var(--dark-section-bg);
            border-color: var(--dark-border-color);
        }

        .filter-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            font-size: 18px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
            transition: var(--transition);
        }
        body.dark-mode .filter-title {
            color: var(--dark-text-color);
            border-bottom-color: var(--dark-border-color);
        }
        .filter-title:hover {
            color: var(--secondary-color); /* Amber hover */
        }


        .filter-title i {
            transition: transform 0.3s ease;
        }

        .filter-title.collapsed i {
            transform: rotate(-90deg); /* Arrow points right when collapsed */
        }

        .filter-content {
            padding-top: 15px;
            padding-left: 10px;
            max-height: 0; /* For collapse animation */
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding-top 0.4s ease-out;
        }

        .filter-content.show {
            max-height: 500px; /* Max height to allow expansion */
            padding-top: 15px;
        }

        .filter-option {
            margin-bottom: 12px;
        }

        .filter-option label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 15px;
            color: var(--text-color);
        }
        body.dark-mode .filter-option label {
            color: var(--dark-text-color);
        }

        .filter-option input[type="checkbox"] {
            margin-right: 12px;
            width: 20px; /* Larger checkbox */
            height: 20px;
            accent-color: var(--primary-color); /* Native checkbox color */
        }

        .price-range {
            width: 100%;
            margin: 20px 0;
            -webkit-appearance: none;
            height: 8px;
            background: var(--border-color);
            border-radius: 5px;
            outline: none;
            transition: background 0.2s ease;
        }
        body.dark-mode .price-range {
            background: var(--dark-border-color);
        }
        .price-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: var(--gradient-primary);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 128, 128, 0.4);
            transition: var(--transition);
        }
        .price-range::-webkit-slider-thumb:hover {
            box-shadow: var(--button-hover-glow);
            transform: scale(1.1);
        }

        .price-inputs {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }

        .price-input {
            width: 48%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 15px;
            background-color: var(--card-bg);
            color: var(--text-color);
            transition: var(--transition);
        }
        body.dark-mode .price-input {
            background-color: var(--dark-card-bg);
            border-color: var(--dark-border-color);
            color: var(--dark-text-color);
        }
        .price-input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 128, 128, 0.1);
        }

        .filter-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .apply-filters, .reset-filters {
            border: none;
            padding: 15px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            flex: 1;
            font-size: 16px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .apply-filters {
            background: var(--gradient-primary);
            color: white;
        }
        .apply-filters:hover {
            background: var(--gradient-button-hover);
            transform: translateY(-3px);
            box-shadow: var(--button-hover-glow);
        }

        .reset-filters {
            background: var(--bg-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        body.dark-mode .reset-filters {
            background-color: var(--dark-section-bg);
            color: var(--dark-text-color);
            border-color: var(--dark-border-color);
        }
        .reset-filters:hover {
            background: var(--card-bg);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
        body.dark-mode .reset-filters:hover {
            background-color: var(--dark-card-bg);
        }

        .filter-toggle {
            position: fixed;
            left: 30px; /* More inward */
            bottom: 20px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            width: 60px; /* Larger button */
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0, 128, 128, 0.4);
            z-index: 100;
            transition: var(--transition);
            font-size: 24px;
        }
        .filter-toggle:hover {
            transform: translateY(-5px) scale(1.1);
            background: var(--gradient-button-hover);
            box-shadow: var(--button-hover-glow);
        }

        /* Pro-Level Banner Styles */
        .banner-section {
            position: relative;
            width: 100%;
            max-width: 1400px;
            margin: 30px auto; /* More margin */
            overflow: hidden;
            border-radius: var(--border-radius);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2); /* Deeper shadow */
            border: 1px solid var(--border-color);
        }
        body.dark-mode .banner-section {
            border-color: var(--dark-border-color);
        }


        .banner-container {
            position: relative;
            height: 550px; /* Taller banner */
        }

        .banner-slides {
            display: flex;
            width: 100%;
            height: 100%;
            transition: transform 0.8s cubic-bezier(0.65, 0, 0.35, 1); /* Smoother transition */
        }

        .banner-slide {
            min-width: 100%;
            position: relative;
            height: 100%;
        }

        .banner-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .banner-caption {
            position: absolute;
            bottom: 60px; /* Higher position */
            left: 60px; /* More inward */
            color: white;
            background-color: rgba(0,0,0,0.75); /* Darker overlay */
            padding: 30px; /* More padding */
            border-radius: var(--border-radius);
            max-width: 550px; /* Wider caption */
            backdrop-filter: blur(8px); /* Stronger blur */
            transform: translateY(50px);
            opacity: 0;
            transition: all 0.7s ease 0.4s; /* Slower and delayed animation */
            border: 1px solid rgba(255, 255, 255, 0.2); /* Subtle border */
        }

        .banner-slide.active .banner-caption {
            transform: translateY(0);
            opacity: 1;
        }

        .banner-caption h3 {
            font-size: 42px; /* Larger heading */
            margin: 0 0 12px;
            font-family: 'Playfair Display', serif;
            text-shadow: 2px 2px 6px rgba(0,0,0,0.6);
        }

        .banner-caption p {
            font-size: 19px; /* Larger text */
            margin: 0 0 25px;
            opacity: 0.9;
        }

        .banner-btn {
            background: var(--gradient-accent); /* Fuchsia gradient for banner CTA */
            color: white;
            border: none;
            padding: 14px 30px; /* Larger button */
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-block;
            text-decoration: none;
            box-shadow: 0 5px 15px rgba(255, 0, 255, 0.3); /* Fuchsia shadow */
            font-size: 16px;
        }

        .banner-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(255, 0, 255, 0.5); /* Stronger shadow */
            background: var(--gradient-secondary); /* Different gradient on hover */
        }

        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.6); /* Darker for better contrast */
            color: white;
            border: none;
            width: 60px; /* Larger buttons */
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
            font-size: 24px; /* Larger icon */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            backdrop-filter: blur(8px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .nav-btn:hover {
            background: rgba(0,0,0,0.8);
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 0 20px var(--primary-color);
        }

        .prev-btn {
            left: 40px;
        }

        .next-btn {
            right: 40px;
        }

        .indicator-dots {
            position: absolute;
            bottom: 30px; /* Higher */
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px; /* Wider gap */
            z-index: 10;
        }

        .dot {
            width: 18px; /* Larger dot */
            height: 18px;
            background-color: rgba(255,255,255,0.4); /* More transparent */
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .dot:hover {
            background-color: white;
            transform: scale(1.1);
        }

        .dot.active {
            background-color: var(--secondary-color); /* Amber active */
            border-color: white;
            transform: scale(1.3); /* More pronounced active state */
            box-shadow: 0 0 10px var(--secondary-color);
        }

        /* Product Grid with Filter Controls */
        .product-section {
            max-width: 1400px;
            margin: 50px auto; /* More margin */
            padding: 0 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px; /* More margin */
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            gap: 20px;
        }

        .section-title {
            font-size: 32px; /* Larger title */
            font-weight: 700;
            color: var(--primary-color);
            font-family: 'Playfair Display', serif;
            position: relative;
            padding-bottom: 12px;
        }
        body.dark-mode .section-title {
            color: var(--dark-text-color);
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px; /* Longer underline */
            height: 4px; /* Thicker */
            background: var(--gradient-secondary); /* Fuchsia to Teal gradient */
        }

        .sort-controls {
            display: flex;
            align-items: center;
            gap: 20px; /* Increased gap */
        }

        .sort-label {
            font-weight: 500;
            font-size: 16px;
            color: var(--text-color);
        }
        body.dark-mode .sort-label {
            color: var(--dark-text-color);
        }

        .sort-select {
            padding: 10px 20px; /* More padding */
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            cursor: pointer;
            background-color: var(--card-bg);
            color: var(--text-color);
            font-size: 15px;
            transition: var(--transition);
        }
        body.dark-mode .sort-select {
            background-color: var(--dark-card-bg);
            border-color: var(--dark-border-color);
            color: var(--dark-text-color);
        }
        .sort-select:hover, .sort-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 128, 128, 0.1);
            outline: none;
        }

        .product-grid-container {
            display: flex;
            gap: 30px;
        }

        /* Updated Product Grid Styles */
        .product-grid {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); /* Larger min size for desktop */
            gap: 30px; /* Increased gap */
        }

        @media (max-width: 1200px) {
            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }

        @media (max-width: 992px) {
            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            }
        }

        /* Mobile specific: 2 products per row */
        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: repeat(2, 1fr); /* Two columns on mobile */
                gap: 20px; /* Adjust gap for 2 columns */
            }
        }
        /* Mobile specific: Single column for very small screens */
        @media (max-width: 480px) {
            .product-grid {
                grid-template-columns: 1fr;
            }
        }


        .product-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.4s ease, border-color 0.4s ease;
            position: relative;
            border: 1px solid var(--border-color);
        }
        body.dark-mode .product-card {
            background-color: var(--dark-card-bg);
            border-color: var(--dark-border-color);
        }

        .product-card:hover {
            transform: translateY(-12px); /* More pronounced lift */
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2); /* Deeper shadow on hover */
            border-color: var(--primary-color); /* Teal border on hover */
        }
        body.dark-mode .product-card:hover {
            border-color: var(--secondary-color); /* Amber border on dark hover */
        }

        .product-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--gradient-accent); /* Fuchsia gradient badge */
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            z-index: 1;
            box-shadow: 0 3px 10px rgba(255, 0, 255, 0.2); /* Fuchsia shadow */
            animation: pulse 2s infinite ease-in-out; /* Subtle pulse on badge */
        }

        .product-image {
            height: 280px; /* Taller image container */
            overflow: hidden;
            position: relative;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .product-card:hover .product-image img {
            transform: scale(1.15); /* More zoom on hover */
        }

        .quick-view-btn {
            position: absolute;
            bottom: -60px; /* Hidden below */
            left: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.85); /* Darker overlay */
            color: white;
            text-align: center;
            padding: 15px; /* Larger padding */
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            opacity: 0;
            font-weight: 600;
            backdrop-filter: blur(8px); /* Stronger blur */
            font-size: 16px;
        }

        .product-card:hover .quick-view-btn {
            bottom: 0;
            opacity: 1;
        }

        .wishlist-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255,255,255,0.9); /* Almost opaque */
            width: 45px; /* Larger button */
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            opacity: 0;
            z-index: 1;
            font-size: 20px;
            color: var(--muted-text);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        body.dark-mode .wishlist-btn {
            background: rgba(42, 53, 64, 0.9);
            color: var(--dark-muted-text);
        }

        .product-card:hover .wishlist-btn {
            opacity: 1;
        }

        .wishlist-btn.active {
            opacity: 1;
            background: var(--accent-color);
            color: white;
            box-shadow: 0 0 15px var(--accent-color);
        }

        .wishlist-btn:hover {
            background: var(--accent-color);
            color: white;
            transform: scale(1.2); /* More pronounced scale */
            box-shadow: 0 0 20px var(--accent-color);
        }

        .product-info {
            padding: 25px; /* More padding */
        }

        .product-title {
            font-size: 20px; /* Larger title */
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-color); /* Dynamic color */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        body.dark-mode .product-title {
            color: var(--dark-text-color);
        }

        .product-description {
            font-size: 15px; /* Slightly larger text */
            color: var(--muted-text); /* Dynamic color */
            margin-bottom: 18px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 40px; /* Ensure consistent height */
        }
        body.dark-mode .product-description {
            color: var(--dark-muted-text);
        }

        .product-price {
            font-size: 24px; /* Larger price */
            font-weight: 700;
            color: var(--primary-color); /* Teal price */
            margin-bottom: 18px;
            display: flex;
            align-items: center;
        }
        body.dark-mode .product-price {
            color: var(--secondary-color); /* Amber price in dark mode */
        }

        .old-price {
            text-decoration: line-through;
            color: var(--muted-text);
            font-size: 17px;
            margin-left: 12px;
            font-weight: 400;
        }
        body.dark-mode .old-price {
            color: var(--dark-muted-text);
        }

        .product-actions {
            display: flex;
            justify-content: space-between;
            gap: 12px; /* Increased gap */
        }

        .add-to-cart-btn, .order-btn {
            border: none;
            padding: 12px; /* More padding */
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .add-to-cart-btn {
            background: var(--gradient-primary);
            color: white;
        }
        .add-to-cart-btn:hover {
            background: var(--gradient-button-hover);
            transform: translateY(-3px);
            box-shadow: var(--button-hover-glow);
        }

        .order-btn {
            background: var(--gradient-secondary); /* Fuchsia to Teal for order button */
            color: white; /* Text white on this gradient too */
        }
        .order-btn:hover {
            background: var(--gradient-accent); /* Amber to Fuchsia on hover */
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 0, 255, 0.3); /* Fuchsia shadow */
        }

        /* Glass Background for Product Section */
        .glass-background {
            position: relative;
            z-index: 1;
            padding: 40px; /* Add padding to contain inner elements */
            border-radius: var(--border-radius);
            backdrop-filter: blur(5px);
            background-color: rgba(255, 255, 255, 0.05); /* Very slight white tint */
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.05), 0 0 50px rgba(0,0,0,0.1);
        }

        .glass-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80');
            background-size: cover;
            background-position: center;
            filter: blur(8px) brightness(0.6); /* Stronger blur and darker */
            z-index: -1;
            opacity: 0.2;
            border-radius: var(--border-radius);
        }

        body.dark-mode .glass-background {
            background-color: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1), 0 0 50px rgba(0,0,0,0.3);
        }
        body.dark-mode .glass-background::before {
            filter: blur(10px) brightness(0.4);
            opacity: 0.3; /* Slightly more visible in dark mode */
        }

        /* Contact Section */
        #contact {
            background-color: var(--section-bg);
            margin: 50px auto;
            padding: 50px; /* More padding */
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            max-width: 1400px;
            border: 1px solid var(--border-color);
        }
        body.dark-mode #contact {
            background-color: var(--dark-section-bg);
            border-color: var(--dark-border-color);
        }

        .contact-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Larger columns */
            gap: 40px; /* More gap */
            margin-top: 40px;
        }

        .contact-method {
            background: var(--card-bg);
            padding: 35px; /* More padding */
            border-radius: var(--border-radius);
            text-align: center;
            transition: var(--transition);
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            border: 1px solid var(--border-color);
        }
        body.dark-mode .contact-method {
            background-color: var(--dark-card-bg);
            border-color: var(--dark-border-color);
        }

        .contact-method:hover {
            transform: translateY(-12px); /* More pronounced lift */
            box-shadow: 0 18px 35px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-color);
        }
        body.dark-mode .contact-method:hover {
            border-color: var(--secondary-color);
        }

        .contact-method i {
            font-size: 44px; /* Larger icon */
            color: var(--primary-color);
            margin-bottom: 25px;
            background: rgba(0, 128, 128, 0.1); /* Teal tint background */
            width: 80px; /* Larger circle */
            height: 80px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        body.dark-mode .contact-method i {
            background: rgba(255, 191, 0, 0.1); /* Amber tint in dark mode */
            color: var(--secondary-color);
        }
        .contact-method:hover i {
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--primary-color);
        }
        body.dark-mode .contact-method:hover i {
            box-shadow: 0 0 20px var(--secondary-color);
        }

        .contact-method h4 {
            margin: 0 0 18px;
            color: var(--text-color); /* Dynamic color */
            font-size: 22px;
            font-family: 'Montserrat', sans-serif;
        }
        body.dark-mode .contact-method h4 {
            color: var(--dark-text-color);
        }

        .contact-method a, .contact-method p {
            color: var(--muted-text); /* Dynamic color */
            text-decoration: none;
            font-weight: 500;
            font-size: 17px;
            transition: var(--transition);
            line-height: 1.5;
        }
        body.dark-mode .contact-method a, body.dark-mode .contact-method p {
            color: var(--dark-muted-text);
        }

        .contact-method a:hover {
            color: var(--primary-color);
            text-decoration: underline;
        }
        body.dark-mode .contact-method a:hover {
            color: var(--secondary-color);
        }

        /* Customer Review Section */
        #customer-reviews {
            background-color: var(--section-bg);
            margin: 50px auto;
            padding: 50px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            max-width: 1400px;
            border: 1px solid var(--border-color);
        }
        body.dark-mode #customer-reviews {
            background-color: var(--dark-section-bg);
            border-color: var(--dark-border-color);
        }

        .review-form {
            margin-top: 30px;
            padding: 30px;
            background: var(--bg-color);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        body.dark-mode .review-form {
            background-color: var(--dark-card-bg);
            border-color: var(--dark-border-color);
        }

        .review-form h4 {
            font-size: 22px;
            margin-bottom: 20px;
            color: var(--primary-color);
        }
        body.dark-mode .review-form h4 {
            color: var(--dark-text-color);
        }

        .review-form .form-group {
            margin-bottom: 20px;
        }

        .review-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-color);
        }
        body.dark-mode .review-form label {
            color: var(--dark-text-color);
        }

        .review-form input[type="text"],
        .review-form input[type="email"],
        .review-form textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 15px;
            background-color: var(--card-bg);
            color: var(--text-color);
            transition: var(--transition);
        }
        body.dark-mode .review-form input,
        body.dark-mode .review-form textarea {
            background-color: var(--dark-card-bg);
            border-color: var(--dark-border-color);
            color: var(--dark-text-color);
        }
        .review-form input:focus,
        .review-form textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 128, 128, 0.1);
        }

        .rating-input {
            display: flex;
            gap: 5px;
        }
        .rating-input .star {
            font-size: 24px;
            color: #ccc;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        .rating-input .star.selected,
        .rating-input .star:hover {
            color: #FFBF00; /* Amber for stars */
        }

        .review-submit-btn {
            background: var(--gradient-primary);
            color: white;
            padding: 12px 25px;
            border-radius: var(--border-radius);
            font-weight: 600;
            font-size: 16px;
            transition: var(--transition);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .review-submit-btn:hover {
            background: var(--gradient-button-hover);
            transform: translateY(-3px);
            box-shadow: var(--button-hover-glow);
        }

        .reviews-list {
            margin-top: 40px;
        }

        .review-item {
            background: var(--bg-color);
            padding: 25px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: var(--transition);
        }
        body.dark-mode .review-item {
            background-color: var(--dark-card-bg);
            border-color: var(--dark-border-color);
        }
        .review-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px dashed var(--border-color);
        }
        body.dark-mode .review-header {
            border-bottom-color: var(--dark-border-color);
        }

        .reviewer-info {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 17px;
        }
        body.dark-mode .reviewer-info {
            color: var(--dark-text-color);
        }

        .review-stars {
            color: #FFBF00; /* Amber for stars */
            font-size: 18px;
        }

        .review-date {
            font-size: 13px;
            color: var(--muted-text);
            margin-top: 5px;
        }
        body.dark-mode .review-date {
            color: var(--dark-muted-text);
        }

        .review-comment {
            color: var(--text-color);
            line-height: 1.7;
        }
        body.dark-mode .review-comment {
            color: var(--dark-text-color);
        }

        /* Footer Styles */
        footer {
            background: var(--dark-bg-color); /* Deep background for footer */
            color: white;
            padding: 70px 0 40px; /* More padding */
            margin-top: 80px;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.3); /* Top shadow */
        }

        .footer-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Larger columns */
            gap: 50px; /* More gap */
            margin-bottom: 50px;
        }

        .footer-column h5 {
            font-size: 24px; /* Larger heading */
            margin-bottom: 30px;
            position: relative;
            padding-bottom: 15px;
            font-family: 'Playfair Display', serif;
            color: var(--secondary-color); /* Amber heading */
        }

        .footer-column h5::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 60px; /* Longer underline */
            height: 4px; /* Thicker */
            background: var(--gradient-accent); /* Fuchsia gradient */
        }

        .footer-column p {
            margin-bottom: 25px;
            opacity: 0.9;
            line-height: 1.8;
            font-size: 15px;
        }

        .social-links {
            display: flex;
            gap: 18px; /* More gap */
            margin-top: 30px;
        }

        .social-links a {
            color: white;
            background-color: rgba(255, 255, 255, 0.15); /* More visible background */
            width: 45px; /* Larger icon */
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            font-size: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .social-links a:hover {
            background: var(--gradient-primary); /* Teal-Amber gradient on hover */
            color: white; /* Keep white text */
            transform: translateY(-7px); /* More pronounced lift */
            box-shadow: var(--button-hover-glow);
        }

        .footer-links {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-links li {
            margin-bottom: 15px; /* More spacing */
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.9); /* Slightly more opaque */
            text-decoration: none;
            transition: var(--transition);
            display: inline-block;
            font-size: 15px;
        }

        .footer-links a:hover {
            color: var(--primary-color); /* Teal highlight */
            padding-left: 10px; /* More slide */
            text-shadow: 0 0 5px rgba(0, 128, 128, 0.3);
        }

        .newsletter-form {
            display: flex;
            margin-top: 25px;
            flex-direction: column;
            gap: 18px;
        }

        .newsletter-input {
            flex: 1;
            padding: 14px 20px; /* Larger padding */
            border: none;
            border-radius: var(--border-radius);
            outline: none;
            font-size: 16px;
            background-color: rgba(255,255,255,0.9); /* Lighter background */
            color: var(--text-color);
        }

        .newsletter-input:focus {
            box-shadow: 0 0 0 3px var(--primary-color);
        }

        .newsletter-btn {
            background: var(--gradient-accent); /* Fuchsia gradient for newsletter */
            color: white;
            border: none;
            padding: 14px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 16px;
            box-shadow: 0 5px 15px rgba(255, 0, 255, 0.3);
        }

        .newsletter-btn:hover {
            background: var(--gradient-secondary); /* Fuchsia to Teal on hover */
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 0, 255, 0.5);
        }

        .payment-methods {
            display: flex;
            gap: 18px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .payment-methods img {
            height: 35px; /* Larger images */
            border-radius: 6px;
            background: white;
            padding: 6px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.15); /* More visible border */
            margin-top: 50px;
        }

        .footer-bottom p {
            margin: 0;
            opacity: 0.9;
            font-size: 15px;
        }
        .footer-bottom i {
            color: var(--accent-color); /* Fuchsia heart */
            animation: pulse 1.5s infinite;
        }

        /* Modal Styles (Product, Login, Register) */
        .modal, .login-modal, .register-modal {
            display: none;
            position: fixed;
            z-index: 1050;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.85); /* Darker overlay */
            opacity: 0;
            transition: opacity 0.4s ease;
            backdrop-filter: blur(8px); /* Stronger blur */
        }

        .modal.show, .login-modal.show, .register-modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }

        .modal-content, .login-content, .register-content {
            background-color: var(--card-bg);
            margin: auto;
            padding: 40px;
            border-radius: var(--border-radius);
            max-width: 950px; /* Wider for product modal */
            width: 90%;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4); /* Deeper shadow */
            transform: translateY(-80px); /* More pronounced slide */
            transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 2px solid var(--primary-color); /* Accent border */
            opacity: 0; /* Start hidden for animation */
            animation: slideUpContent 0.5s forwards cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        body.dark-mode .modal-content, body.dark-mode .login-content, body.dark-mode .register-content {
            background-color: var(--dark-card-bg);
            border-color: var(--secondary-color); /* Amber border in dark mode */
        }
        @keyframes slideUpContent {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal.show .modal-content, .login-modal.show .login-content, .register-modal.show .register-content {
            transform: translateY(0);
            opacity: 1;
        }

        .close-modal, .close-login {
            position: absolute;
            top: 25px;
            right: 25px;
            font-size: 32px; /* Larger icon */
            color: var(--muted-text);
            cursor: pointer;
            transition: var(--transition);
            background: var(--bg-color);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        body.dark-mode .close-modal, body.dark-mode .close-login {
            background: var(--dark-section-bg);
        }

        .close-modal:hover, .close-login:hover {
            color: var(--accent-color);
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 0 15px var(--accent-color);
        }

        .product-modal {
            display: grid;
            grid-template-columns: 1.2fr 1fr; /* Image slightly larger */
            gap: 50px; /* More gap */
        }

        .product-modal-images {
            position: relative;
        }

        .main-product-image {
            width: 100%;
            height: 450px; /* Taller image */
            object-fit: contain;
            border-radius: var(--border-radius);
            background-color: var(--bg-color);
            margin-bottom: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
        }
        body.dark-mode .main-product-image {
            background-color: var(--dark-section-bg);
            border-color: var(--dark-border-color);
        }

        .product-thumbnails {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center; /* Center thumbnails */
        }

        .thumbnail {
            width: 80px; /* Larger thumbnails */
            height: 80px;
            object-fit: cover;
            border-radius: var(--border-radius);
            cursor: pointer;
            border: 3px solid transparent; /* Thicker border */
            transition: var(--transition);
            background: var(--bg-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        body.dark-mode .thumbnail {
            background-color: var(--dark-section-bg);
        }

        .thumbnail:hover, .thumbnail.active {
            border-color: var(--secondary-color); /* Amber highlight */
            transform: scale(1.08); /* More pronounced scale */
            box-shadow: 0 0 15px var(--secondary-color);
        }

        .product-modal-details h2 {
            font-size: 32px; /* Larger title */
            margin-bottom: 18px;
            color: var(--primary-color);
            font-family: 'Playfair Display', serif;
        }
        body.dark-mode .product-modal-details h2 {
            color: var(--dark-text-color);
        }

        .product-price-modal {
            font-size: 30px; /* Larger price */
            font-weight: 700;
            color: var(--secondary-color);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
        }

        .old-price-modal {
            text-decoration: line-through;
            color: var(--muted-text);
            font-size: 22px;
            margin-left: 18px;
            font-weight: 400;
        }
        body.dark-mode .old-price-modal {
            color: var(--dark-muted-text);
        }

        .product-description-modal {
            margin-bottom: 30px;
            color: var(--text-color);
            line-height: 1.8;
            font-size: 16px;
        }
        body.dark-mode .product-description-modal {
            color: var(--dark-text-color);
        }

        .product-meta {
            margin-bottom: 30px;
            background: var(--bg-color);
            padding: 20px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        body.dark-mode .product-meta {
            background-color: var(--dark-section-bg);
            border-color: var(--dark-border-color);
        }

        .product-meta span {
            display: block;
            margin-bottom: 10px;
            font-size: 16px;
            color: var(--text-color);
        }
        body.dark-mode .product-meta span {
            color: var(--dark-text-color);
        }

        .product-meta strong {
            color: var(--primary-color);
            font-weight: 600;
        }
        body.dark-mode .product-meta strong {
            color: var(--secondary-color);
        }

        .modal-actions {
            display: flex;
            gap: 20px;
            margin-top: 35px;
            flex-wrap: wrap; /* Allow wrapping */
        }

        .quantity-control {
            display: flex;
            align-items: center;
            margin-right: 20px;
            background: var(--bg-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        body.dark-mode .quantity-control {
            background: var(--dark-section-bg);
            border-color: var(--dark-border-color);
        }

        .quantity-btn {
            width: 45px; /* Larger buttons */
            height: 45px;
            background-color: var(--bg-color);
            border: none;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            color: var(--text-color);
        }
        body.dark-mode .quantity-btn {
            background-color: var(--dark-section-bg);
            color: var(--dark-text-color);
        }

        .quantity-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        .quantity-input {
            width: 70px; /* Wider input */
            height: 45px;
            text-align: center;
            border: none; /* Removed inner border */
            margin: 0;
            font-weight: 500;
            font-size: 16px;
            background-color: var(--card-bg); /* Use card background for input */
            color: var(--text-color);
        }
        body.dark-mode .quantity-input {
            background-color: var(--dark-card-bg);
            color: var(--dark-text-color);
        }

        .add-to-cart-btn-modal, .buy-now-btn {
            border: none;
            padding: 15px 30px; /* Larger padding */
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 16px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .add-to-cart-btn-modal {
            background: var(--gradient-primary);
            color: white;
        }
        .add-to-cart-btn-modal:hover {
            background: var(--gradient-button-hover);
            transform: translateY(-3px);
            box-shadow: var(--button-hover-glow);
        }

        .buy-now-btn {
            background: var(--gradient-secondary);
            color: white; /* Text white on this gradient too */
            text-decoration: none; /* Important for <a> tag */
        }
        .buy-now-btn:hover {
            background: var(--gradient-accent); /* Amber to Fuchsia on hover */
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 0, 255, 0.3);
        }

        .wishlist-btn-modal {
            background: var(--bg-color);
            color: var(--muted-text);
            border: 1px solid var(--border-color);
            width: 55px; /* Larger */
            height: 55px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        body.dark-mode .wishlist-btn-modal {
            background-color: var(--dark-section-bg);
            border-color: var(--dark-border-color);
            color: var(--dark-muted-text);
        }

        .wishlist-btn-modal:hover, .wishlist-btn-modal.active {
            background: var(--accent-color);
            color: white;
            box-shadow: 0 0 18px var(--accent-color);
            transform: scale(1.05);
        }

        /* Cart Sidebar Styles (Glassmorphism inspired) */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -480px; /* Wider sidebar */
            width: 480px;
            height: 100%;
            background: rgba(255, 255, 255, 0.1); /* Lighter for glass effect */
            backdrop-filter: blur(20px); /* Stronger blur */
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.3);
            border-left: 2px solid rgba(255, 255, 255, 0.2); /* Subtle glass border */
            transition: right 0.4s cubic-bezier(0.65, 0, 0.35, 1);
            z-index: 1100;
            overflow-y: auto;
            padding: 30px;
            display: flex;
            flex-direction: column;
            color: var(--text-color); /* Default text color */
        }
        body.dark-mode .cart-sidebar {
            background: rgba(0, 0, 0, 0.1); /* Darker glass effect */
            border-left: 2px solid rgba(0, 0, 0, 0.3);
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.5);
            color: var(--dark-text-color);
        }

        .cart-sidebar.open {
            right: 0;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2); /* Glass border effect */
        }
        body.dark-mode .cart-header {
            border-bottom: 1px solid rgba(0, 0, 0, 0.3);
        }

        .cart-header h3 {
            margin: 0;
            font-size: 28px;
            color: white; /* Text directly on glass, so needs to be strong */
            font-family: 'Playfair Display', serif;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 32px;
            cursor: pointer;
            color: white;
            transition: var(--transition);
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-cart:hover {
            color: var(--accent-color);
            background: rgba(255,255,255,0.2);
            transform: rotate(90deg);
        }

        .cart-items {
            flex: 1;
            margin-bottom: 20px;
            overflow-y: auto;
            padding-right: 10px; /* For scrollbar */
        }

        .cart-item {
            display: flex;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
        }
        body.dark-mode .cart-item {
            border-bottom: 1px dashed rgba(0, 0, 0, 0.2);
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-img {
            width: 100px; /* Larger image */
            height: 100px;
            object-fit: cover;
            border-radius: var(--border-radius);
            margin-right: 20px;
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        body.dark-mode .cart-item-img {
            border-color: rgba(0, 0, 0, 0.3);
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-title {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 8px;
            color: white; /* Stronger text on glass */
        }

        .cart-item-price {
            font-weight: 600;
            color: var(--secondary-color); /* Amber price */
            margin-bottom: 10px;
            font-size: 19px;
            text-shadow: 0 0 5px rgba(255, 191, 0, 0.3);
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .quantity-control-cart {
            display: flex;
            align-items: center;
            background: rgba(255,255,255,0.1);
            border-radius: var(--border-radius);
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.2);
        }
        body.dark-mode .quantity-control-cart {
            background: rgba(0,0,0,0.1);
            border-color: rgba(0,0,0,0.3);
        }

        .quantity-btn-cart {
            width: 35px;
            height: 35px;
            background-color: transparent; /* No background, rely on parent */
            border: none;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            color: white;
        }

        .quantity-btn-cart:hover {
            background: var(--primary-color);
            color: white;
        }

        .quantity-input-cart {
            width: 60px;
            height: 35px;
            text-align: center;
            border: none;
            background-color: rgba(255,255,255,0.05); /* Very light, almost transparent */
            margin: 0;
            border-radius: 0;
            font-weight: 500;
            font-size: 16px;
            color: white;
        }
        body.dark-mode .quantity-input-cart {
            background-color: rgba(0,0,0,0.05);
        }

        .remove-item-btn {
            background: none;
            border: none;
            color: var(--accent-color); /* Fuchsia remove */
            cursor: pointer;
            font-size: 15px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .remove-item-btn:hover {
            color: #ff0000;
            transform: scale(1.08);
        }

        .cart-summary {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        body.dark-mode .cart-summary {
            border-top: 1px solid rgba(0, 0, 0, 0.3);
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 30px;
        }

        .cart-total-label {
            color: white;
        }

        .cart-total-amount {
            color: var(--accent-color); /* Fuchsia total */
            text-shadow: 0 0 8px rgba(255, 0, 255, 0.4);
        }

        .cart-actions {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .checkout-btn, .continue-shopping-btn {
            border: none;
            padding: 18px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 16px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .checkout-btn {
            background: var(--gradient-accent); /* Fuchsia gradient for checkout */
            color: white;
        }
        .checkout-btn:hover {
            background: var(--gradient-secondary); /* Fuchsia to Teal on hover */
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 0, 255, 0.4);
        }

        .continue-shopping-btn {
            background: var(--gradient-primary); /* Teal-Amber for continue shopping */
            color: white;
        }
        .continue-shopping-btn:hover {
            background: var(--gradient-button-hover);
            transform: translateY(-3px);
            box-shadow: var(--button-hover-glow);
        }

        .empty-cart-message {
            text-align: center;
            padding: 60px 0;
            color: rgba(255,255,255,0.7);
        }

        .empty-cart-message i {
            font-size: 70px;
            margin-bottom: 25px;
            color: rgba(255,255,255,0.3);
        }

        .empty-cart-message p {
            margin-bottom: 30px;
            font-size: 19px;
        }

        /* Wishlist Sidebar - Similar to Cart for consistency */
        .wishlist-sidebar {
            position: fixed;
            top: 0;
            right: -480px;
            width: 480px;
            height: 100%;
            background: rgba(255, 255, 255, 0.1); /* Glass effect */
            backdrop-filter: blur(20px);
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.3);
            border-left: 2px solid rgba(255, 255, 255, 0.2);
            transition: right 0.4s cubic-bezier(0.65, 0, 0.35, 1);
            z-index: 1100;
            overflow-y: auto;
            padding: 30px;
            display: flex;
            flex-direction: column;
            color: var(--text-color);
        }
        body.dark-mode .wishlist-sidebar {
            background: rgba(0, 0, 0, 0.1);
            border-left: 2px solid rgba(0, 0, 0, 0.3);
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.5);
            color: var(--dark-text-color);
        }

        .wishlist-sidebar.open {
            right: 0;
        }

        .wishlist-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        body.dark-mode .wishlist-header {
            border-bottom: 1px solid rgba(0, 0, 0, 0.3);
        }

        .wishlist-header h3 {
            margin: 0;
            font-size: 28px;
            color: white;
            font-family: 'Playfair Display', serif;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
        }

        .close-wishlist {
            background: none;
            border: none;
            font-size: 32px;
            cursor: pointer;
            color: white;
            transition: var(--transition);
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-wishlist:hover {
            color: var(--accent-color);
            background: rgba(255,255,255,0.2);
            transform: rotate(90deg);
        }

        .wishlist-items {
            flex: 1;
            margin-bottom: 20px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .wishlist-item {
            display: flex;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
        }
        body.dark-mode .wishlist-item {
            border-bottom: 1px dashed rgba(0, 0, 0, 0.2);
        }

        .wishlist-item:last-child {
            border-bottom: none;
        }

        .wishlist-item-img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: var(--border-radius);
            margin-right: 20px;
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        body.dark-mode .wishlist-item-img {
            border-color: rgba(0, 0, 0, 0.3);
        }

        .wishlist-item-details {
            flex: 1;
        }

        .wishlist-item-title {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 8px;
            color: white;
        }

        .wishlist-item-price {
            font-weight: 600;
            color: var(--secondary-color);
            margin-bottom: 10px;
            font-size: 19px;
            text-shadow: 0 0 5px rgba(255, 191, 0, 0.3);
        }

        .wishlist-item-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .add-to-cart-from-wishlist, .remove-from-wishlist {
            border: none;
            padding: 10px 18px;
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .add-to-cart-from-wishlist {
            background: var(--gradient-primary);
            color: white;
        }
        .add-to-cart-from-wishlist:hover {
            background: var(--gradient-button-hover);
            transform: translateY(-3px);
            box-shadow: var(--button-hover-glow);
        }

        .remove-from-wishlist {
            background: none;
            color: var(--accent-color);
        }
        .remove-from-wishlist:hover {
            color: #ff0000;
            transform: scale(1.08);
        }

        .empty-wishlist-message {
            text-align: center;
            padding: 60px 0;
            color: rgba(255,255,255,0.7);
        }

        .empty-wishlist-message i {
            font-size: 70px;
            margin-bottom: 25px;
            color: rgba(255,255,255,0.3);
        }

        .empty-wishlist-message p {
            margin-bottom: 30px;
            font-size: 19px;
        }

        .wishlist-actions {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        body.dark-mode .wishlist-actions {
            border-top: 1px solid rgba(0, 0, 0, 0.3);
        }

        /* Login/Register Modals */
        .login-content, .register-content {
            max-width: 500px; /* Wider for better form layout */
            padding: 50px;
        }

        .login-title {
            text-align: center;
            margin-bottom: 40px;
            color: var(--primary-color);
            font-family: 'Playfair Display', serif;
            font-size: 32px;
        }
        body.dark-mode .login-title {
            color: var(--dark-text-color);
        }

        .login-form .form-group {
            margin-bottom: 30px;
        }

        .login-form label {
            display: block;
            margin-bottom: 12px;
            font-weight: 500;
            color: var(--text-color);
            font-size: 16px;
        }
        body.dark-mode .login-form label {
            color: var(--dark-text-color);
        }

        .login-form input {
            width: 100%;
            padding: 14px 20px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 17px;
            transition: var(--transition);
            background-color: var(--card-bg);
            color: var(--text-color);
        }
        body.dark-mode .login-form input {
            background-color: var(--dark-section-bg);
            border-color: var(--dark-border-color);
            color: var(--dark-text-color);
        }

        .login-form input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 128, 128, 0.15);
        }

        .login-btn-modal {
            width: 100%;
            padding: 18px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 20px;
            font-size: 18px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .login-btn-modal:hover {
            background: var(--gradient-button-hover);
            transform: translateY(-3px);
            box-shadow: var(--button-hover-glow);
        }

        .login-footer {
            text-align: center;
            margin-top: 30px;
            font-size: 16px;
            color: var(--text-color);
        }
        body.dark-mode .login-footer {
            color: var(--dark-text-color);
        }

        .login-footer a {
            color: var(--accent-color);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
        }

        .login-footer a:hover {
            text-decoration: underline;
            color: var(--primary-color);
        }

        .forgot-password {
            text-align: right;
            margin-top: -20px;
            margin-bottom: 25px;
        }

        .forgot-password a {
            color: var(--muted-text);
            text-decoration: none;
            font-size: 15px;
            transition: var(--transition);
        }
        body.dark-mode .forgot-password a {
            color: var(--dark-muted-text);
        }

        .forgot-password a:hover {
            text-decoration: underline;
            color: var(--primary-color);
        }

        /* Overlay for modals and sidebars */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6); /* Slightly lighter for less distraction */
            z-index: 1000;
            display: none;
            backdrop-filter: blur(5px);
            transition: opacity 0.3s ease;
        }
        .overlay.show {
            opacity: 1;
        }
        .overlay.hide {
            opacity: 0;
        }


        /* Floating Cart Button */
        .floating-cart-btn {
            position: fixed;
            right: 30px;
            bottom: 20px;
            background: var(--gradient-accent);
            color: white;
            width: 65px; /* Larger button */
            height: 65px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            box-shadow: 0 8px 25px rgba(255, 0, 255, 0.4); /* Fuchsia shadow */
            cursor: pointer;
            z-index: 100;
            transition: var(--transition);
            animation: pulse 2.5s infinite;
        }

        .floating-cart-btn:hover {
            transform: translateY(-7px) scale(1.15); /* More pronounced lift and scale */
            box-shadow: 0 12px 30px rgba(255, 0, 255, 0.6);
        }

        .floating-cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--secondary-color); /* Amber count */
            color: white; /* Text white on amber */
            width: 28px; /* Larger */
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            border: 2px solid var(--dark-bg-color);
        }
        body.dark-mode .floating-cart-count {
            border-color: var(--bg-color);
        }

        /* Responsive Styles */
        @media (max-width: 1200px) {
            .product-modal {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .product-modal-images {
                margin-bottom: 30px;
            }

            .banner-container {
                height: 450px;
            }
            .banner-caption {
                left: 40px;
                bottom: 40px;
                max-width: 90%;
                padding: 25px;
            }
            .banner-caption h3 {
                font-size: 36px;
            }
            .banner-caption p {
                font-size: 17px;
            }
            .nav-btn {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            .prev-btn { left: 20px; }
            .next-btn { right: 20px; }
            .dot {
                width: 15px;
                height: 15px;
            }
            .filter-sidebar {
                width: 350px;
                left: -350px;
            }
        }

        @media (max-width: 992px) {
            .header-container {
                flex-direction: column;
                text-align: center;
                padding: 0 20px;
            }

            .logo-container {
                margin-bottom: 15px;
                justify-content: center;
            }

            .user-actions {
                margin-top: 15px;
                flex-wrap: wrap;
                justify-content: center;
            }

            .mobile-menu-toggle {
                display: block;
                position: absolute;
                right: 20px;
                top: 25px; /* Adjusted position */
            }

            .nav-container {
                flex-direction: column;
                padding: 10px 20px;
                align-items: flex-start; /* Align menu items to left */
            }
            nav {
                top: 0; /* Sticky to top for mobile to make menu toggle always visible */
            }


            .nav-links {
                flex-direction: column;
                width: 100%;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.4s ease-out, opacity 0.4s ease-out; /* Smooth collapse */
                opacity: 0;
                align-items: flex-start;
            }

            .nav-links.active {
                max-height: 600px; /* Adjust as needed for menu items */
                padding: 15px 0;
                opacity: 1;
            }

            nav a, .dropbtn {
                padding: 12px 20px; /* More mobile-friendly padding */
                width: 100%;
                text-align: left; /* Align text left */
            }

            .dropdown-content {
                position: static;
                box-shadow: none;
                width: 100%;
                border-top: none;
                display: none;
                background-color: var(--bg-color); /* Lighter dropdown background for mobile menu */
                border-radius: 0;
                padding-left: 20px; /* Indent dropdown items */
            }
            body.dark-mode .dropdown-content {
                background-color: var(--dark-section-bg);
            }

            .dropdown.active .dropdown-content {
                display: block;
            }
            .dropdown-content a:hover {
                padding-left: 30px; /* Deeper indent on hover for mobile */
            }

            .cart-sidebar, .wishlist-sidebar {
                width: 100%;
                right: -100%;
            }

            .filter-sidebar {
                width: 90%;
                left: -90%;
            }

            .product-actions {
                flex-direction: column;
                gap: 10px;
            }

            .add-to-cart-btn, .order-btn {
                width: 100%;
            }

            .modal-actions {
                flex-direction: column;
            }

            .quantity-control {
                justify-content: center;
                margin-bottom: 15px;
                width: 100%; /* Full width for quantity */
            }
            .quantity-input {
                flex: 1; /* Make input fill space */
            }

            .banner-container {
                height: 350px;
            }

            .banner-caption {
                left: 20px;
                bottom: 20px;
                max-width: 90%;
                padding: 15px;
                font-size: 16px;
            }

            .banner-caption h3 {
                font-size: 28px;
            }

            .banner-caption p {
                font-size: 16px;
                margin-bottom: 15px;
            }

            .banner-btn {
                padding: 10px 20px;
                font-size: 14px;
            }

            .nav-btn {
                width: 45px;
                height: 45px;
                font-size: 18px;
            }
            .prev-btn { left: 15px; }
            .next-btn { right: 15px; }

            .dot {
                width: 12px;
                height: 12px;
            }
            .search-container {
                top: 70px; /* Adjust sticky position for mobile header */
            }
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            .sort-controls {
                width: 100%;
                justify-content: flex-start;
            }
            .sort-select {
                flex: 1;
            }
            #contact {
                padding: 30px;
            }
            .contact-info {
                gap: 20px;
            }
            .contact-method {
                padding: 25px;
            }
            .contact-method i {
                width: 60px;
                height: 60px;
                font-size: 32px;
            }
            #customer-reviews {
                padding: 30px;
            }
            .review-form {
                padding: 20px;
            }
            .review-form h4 {
                font-size: 20px;
            }
            .review-item {
                padding: 20px;
            }
            .review-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            .review-stars {
                font-size: 16px;
            }
        }

        @media (max-width: 768px) {
            /* Keep 2 columns on mobile (from earlier rule) */
            .product-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            .product-image {
                height: 200px;
            }
            .product-info {
                padding: 15px;
            }
            .product-title {
                font-size: 16px;
                margin-bottom: 8px;
            }
            .product-description {
                font-size: 13px;
                min-height: 36px;
            }
            .product-price {
                font-size: 20px;
                margin-bottom: 12px;
            }
            .old-price {
                font-size: 14px;
                margin-left: 8px;
            }
            .add-to-cart-btn, .order-btn {
                font-size: 13px;
                padding: 10px;
            }

            .modal-content {
                padding: 30px 20px;
            }
            .product-modal {
                gap: 20px;
            }
            .main-product-image {
                height: 300px;
            }
            .thumbnail {
                width: 60px;
                height: 60px;
            }
            .product-modal-details h2 {
                font-size: 26px;
            }
            .product-price-modal {
                font-size: 24px;
            }
            .product-description-modal {
                font-size: 14px;
            }
            .modal-actions {
                gap: 10px;
            }
            .quantity-control {
                margin-right: 10px;
            }
            .quantity-btn {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
            .quantity-input {
                width: 60px;
                height: 40px;
                font-size: 15px;
            }
            .add-to-cart-btn-modal, .buy-now-btn {
                padding: 12px 20px;
                font-size: 14px;
            }
            .wishlist-btn-modal {
                width: 45px;
                height: 45px;
                font-size: 18px;
            }
            .floating-cart-btn, .floating-message-btn {
                width: 55px;
                height: 55px;
                font-size: 22px;
                bottom: 15px;
                right: 15px;
            }
            .floating-message-btn {
                bottom: 85px; /* Adjust if cart button is still above */
            }
            .theme-toggle {
                width: 45px;
                height: 45px;
                font-size: 18px;
                bottom: 15px;
                right: 80px; /* Position next to cart/message button */
            }
            .filter-toggle {
                width: 50px;
                height: 50px;
                font-size: 20px;
                left: 15px;
                bottom: 15px;
            }
        }

        @media (max-width: 576px) {
            .footer-grid {
                grid-template-columns: 1fr;
            }

            .newsletter-form {
                flex-direction: column;
            }

            .newsletter-input {
                border-radius: var(--border-radius);
                margin-bottom: 10px;
            }

            .newsletter-btn {
                border-radius: var(--border-radius);
                padding: 12px;
            }

            .search-input {
                padding: 12px 20px;
            }

            .search-btn {
                padding: 0 20px;
            }

            .banner-container {
                height: 280px;
            }

            .banner-caption {
                max-width: 90%;
                left: 50%;
                transform: translateX(-50%);
                text-align: center;
            }
            .banner-caption h3 {
                font-size: 24px;
            }
            .banner-caption p {
                font-size: 14px;
            }
            .banner-btn {
                padding: 10px 18px;
                font-size: 13px;
            }

            .sort-controls {
                width: 100%;
            }

            .sort-select {
                width: 100%;
            }

            .product-modal-details h2 {
                font-size: 24px;
            }

            .product-price-modal {
                font-size: 22px;
            }

            .product-description-modal {
                font-size: 14px;
            }

            .modal-actions button, .modal-actions a {
                padding: 10px 15px;
                font-size: 14px;
            }
        }

        @media (max-width: 400px) {
            .header-text h1 {
                font-size: 22px;
            }
            .header-text p {
                font-size: 11px;
            }
            .login-btn {
                padding: 6px 12px;
                font-size: 13px;
            }
            .search-input {
                font-size: 14px;
            }
            .search-btn {
                font-size: 14px;
            }
            .product-grid {
                grid-template-columns: 1fr; /* Single column for very small */
            }
            .product-image {
                height: 250px;
            }
            .banner-container {
                height: 220px;
            }
            .banner-caption {
                padding: 10px;
            }
            .banner-caption h3 {
                font-size: 20px;
            }
            .banner-caption p {
                font-size: 12px;
            }
            .nav-btn {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
            .modal-content {
                padding: 20px;
            }
            .main-product-image {
                height: 200px;
            }
            .thumbnail {
                width: 50px;
                height: 50px;
            }
            .contact-info {
                grid-template-columns: 1fr;
            }
            .contact-method i {
                width: 50px;
                height: 50px;
                font-size: 28px;
            }
            .contact-method h4 {
                font-size: 18px;
            }
            .contact-method a, .contact-method p {
                font-size: 15px;
            }
        }

    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading THE LIGHTNING...</div>
    </div>

    <!-- Welcome Notification -->
    <div class="welcome-notification" id="welcomeNotification">
         Welcome to THE LIGHTNING! Discover your style.
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="login-modal">
        <div class="login-content">
            <span class="close-login">&times;</span>
            <h2 class="login-title">Welcome Back</h2>
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="loginEmail"><i class="fas fa-envelope"></i> Email</label>
                    <input type="email" id="loginEmail" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword"><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password" required>
                </div>
                <div class="forgot-password">
                    <a href="#">Forgot password?</a>
                </div>
                <button type="submit" class="login-btn-modal">
                    <span class="btn-text">Login</span>
                    <span class="loading-spinner" style="display: none;"></span>
                </button>
                <div class="login-footer">
                    Don't have an account? <a href="#" id="showRegister">Register</a>
                </div>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="register-modal">
        <div class="register-content">
            <span class="close-login">&times;</span>
            <h2 class="login-title">Create Account</h2>
            <form class="login-form" id="registerForm">
                <div class="form-group">
                    <label for="registerName"><i class="fas fa-user"></i> Full Name</label>
                    <input type="text" id="registerName" placeholder="Enter your full name" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail"><i class="fas fa-envelope"></i> Email</label>
                    <input type="email" id="registerEmail" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword"><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="registerPassword" placeholder="Create a password" required>
                </div>
                <div class="form-group">
                    <label for="registerConfirm"><i class="fas fa-lock"></i> Confirm Password</label>
                    <input type="password" id="registerConfirm" placeholder="Confirm your password" required>
                </div>
                <button type="submit" class="login-btn-modal">
                    <span class="btn-text">Register</span>
                    <span class="loading-spinner" style="display: none;"></span>
                </button>
                <div class="login-footer">
                    Already have an account? <a href="#" id="showLogin">Login</a>
                </div>
            </form>
        </div>
    </div>

    <!-- Product Modal (Quick View) -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="product-modal">
                <div class="product-modal-images">
                    <img id="mainProductImage" src="" alt="Product Image" class="main-product-image">
                    <div class="product-thumbnails" id="productThumbnails">
                        <!-- Thumbnails will be added dynamically -->
                    </div>
                </div>
                <div class="product-modal-details">
                    <h2 id="modalProductTitle">Product Title</h2>
                    <div class="product-price-modal">
                        <span id="modalProductPrice">0 BDT</span>
                        <span class="old-price-modal" id="modalOldPrice"></span>
                    </div>
                    <div class="product-description-modal" id="modalProductDescription">
                        Product description goes here with all the details about the product features and specifications.
                    </div>
                    <div class="product-meta">
                        <span><strong>Availability:</strong> <span id="modalAvailability">In Stock</span></span>
                        <span><strong>Category:</strong> <span id="modalCategory"></span></span>
                        <span><strong>SKU:</strong> <span id="modalSKU"></span></span>
                        <span><strong>Brand:</strong> <span id="modalBrand"></span></span>
                    </div>
                   <div class="modal-actions">
                        <div class="quantity-control">
                            <button class="quantity-btn minus">-</button>
                            <input type="number" value="1" min="1" class="quantity-input" id="modalQuantityInput">
                            <button class="quantity-btn plus">+</button>
                        </div>
                        <button class="wishlist-btn-modal" id="modalWishlistBtn"><i class="far fa-heart"></i></button>
                        <button class="add-to-cart-btn-modal"><i class="fas fa-shopping-cart"></i> Add to Cart</button>
                        <a href="#" class="buy-now-btn"><i class="fas fa-bolt"></i> Buy Now</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Filter Sidebar -->
    <div class="filter-sidebar" id="filterSidebar">
        <div class="filter-header">
            <h3>Filter Products</h3>
            <button class="close-filter">&times;</button>
        </div>

        <div class="filter-section">
            <div class="filter-title" data-toggle="collapse" data-target="categoryFilter">
                Categories <i class="fas fa-chevron-down"></i>
            </div>
            <div class="filter-content show" id="categoryFilter">
                <!-- Checkboxes will be dynamically generated -->
            </div>
        </div>

        <div class="filter-section">
            <div class="filter-title" data-toggle="collapse" data-target="priceFilter">
                Price Range <i class="fas fa-chevron-down"></i>
            </div>
            <div class="filter-content show" id="priceFilter">
                <input type="range" class="price-range" min="0" max="10000" step="100" value="10000">
                <div class="price-inputs">
                    <input type="number" class="price-input" id="minPrice" placeholder="Min" value="0">
                    <input type="number" class="price-input" id="maxPrice" placeholder="Max" value="10000">
                </div>
            </div>
        </div>

        <div class="filter-section">
            <div class="filter-title" data-toggle="collapse" data-target="brandFilter">
                Brands <i class="fas fa-chevron-down"></i>
            </div>
            <div class="filter-content show" id="brandFilter">
                <!-- Checkboxes will be dynamically generated -->
            </div>
        </div>

        <div class="filter-section">
            <div class="filter-title" data-toggle="collapse" data-target="availabilityFilter">
                Availability <i class="fas fa-chevron-down"></i>
            </div>
            <div class="filter-content show" id="availabilityFilter">
                <div class="filter-option">
                    <label>
                        <input type="checkbox" name="availability" value="in_stock" checked> In Stock
                    </label>
                </div>
                <div class="filter-option">
                    <label>
                        <input type="checkbox" name="availability" value="out_of_stock"> Out of Stock
                    </label>
                </div>
            </div>
        </div>

        <div class="filter-actions">
            <button class="apply-filters">Apply Filters</button>
            <button class="reset-filters">Reset</button>
        </div>
    </div>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>Your Shopping Cart</h3>
            <button class="close-cart">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Cart items will be inserted here by JavaScript -->
            <div class="empty-cart-message">
                <i class="fas fa-shopping-cart"></i>
                <p>Your cart is empty</p>
                <button class="continue-shopping-btn"><i class="fas fa-arrow-left"></i> Continue Shopping</button>
            </div>
        </div>
        <div class="cart-summary">
            <div class="cart-total">
                <span class="cart-total-label">Total:</span>
                <span class="cart-total-amount" id="cartTotal">0 BDT</span>
            </div>
            <div class="cart-actions">
                <a href="#" class="checkout-btn"><i class="fas fa-credit-card"></i> Proceed to Checkout</a>
                <button class="continue-shopping-btn"><i class="fas fa-arrow-left"></i> Continue Shopping</button>
            </div>
        </div>
    </div>

    <!-- Wishlist Sidebar -->
    <div class="wishlist-sidebar" id="wishlistSidebar">
        <div class="wishlist-header">
            <h3>Your Wishlist</h3>
            <button class="close-wishlist">&times;</button>
        </div>
        <div class="wishlist-items" id="wishlistItems">
            <!-- Wishlist items will be inserted here by JavaScript -->
            <div class="empty-wishlist-message">
                <i class="far fa-heart"></i>
                <p>Your wishlist is empty</p>
                <button class="continue-shopping-btn"><i class="fas fa-arrow-left"></i> Continue Shopping</button>
            </div>
        </div>
        <div class="wishlist-actions">
            <button class="continue-shopping-btn"><i class="fas fa-arrow-left"></i> Continue Shopping</button>
        </div>
    </div>

    <!-- Overlay for modals and sidebars -->
    <div class="overlay" id="overlay"></div>

    <!-- Floating Buttons -->
    <div class="floating-message-btn" id="floatingMessageBtn">
        <i class="fas fa-comments"></i>
    </div>
    <div class="floating-cart-btn" id="floatingCartBtn">
        <i class="fas fa-shopping-cart"></i>
        <div class="floating-cart-count" id="floatingCartCount">0</div>
    </div>
    <button class="filter-toggle" id="filterToggle">
        <i class="fas fa-filter"></i>
    </button>
    <button class="theme-toggle" id="themeToggle">
        <i class="fas fa-moon"></i>
    </button>

    <!-- Header Section -->
    <header>
        <div class="header-container">
            <div class="logo-container">
                <img src="https://i.imgur.com/tgJQiJe.jpeg" alt="The Lightning Logo">
                <div class="header-text">
                    <h1>THE LIGHTNING</h1>
                    <p>Premium Fashion & Accessories</p>
                </div>
            </div>
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="user-actions">
                <button id="translateButton" title="Translate Page">
                    <i class="fas fa-language"></i>
                </button>
                <a href="#" class="wishlist-icon" id="wishlistIcon">
                    <i class="far fa-heart"></i>
                    <span id="wishlistCount">0</span>
                </a>
                <a href="#" class="cart-icon" id="cartIcon">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="cartCount">0</span>
                </a>
                <button class="login-btn" id="openLogin">Login / Register</button>
            </div>
        </div>
    </header>

    <!-- Marquee Announcement -->
    <marquee behavior="scroll" direction="left">
         New Products Added Weekly! Free Shipping on Orders Over 5000 BDT | Use Code LIGHTNING10 for 10% Off Your First Order 
    </marquee>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="nav-links" id="navLinks">
                <a href="index.html" class="active"><i class="fas fa-home"></i> Home</a>
                <a href="#products"><i class="fas fa-th-large"></i> All Products</a>
                <a href="#"><i class="fas fa-male"></i> Men</a>
                <a href="#"><i class="fas fa-female"></i> Women</a>
                <div class="dropdown" id="categoriesDropdown">
                    <button class="dropbtn"><i class="fas fa-sitemap"></i> Categories <i class="fas fa-chevron-down"></i></button>
                    <div class="dropdown-content">
                        <a href="#"><i class="fas fa-tshirt"></i> T-shirts</a>
                        <a href="#"><i class="fas fa-pants"></i> Pants</a>
                        <a href="#"><i class="fas fa-hat-cowboy"></i> Caps</a>
                        <a href="#"><i class="fas fa-sunglasses"></i> Sunglasses</a>
                        <a href="#"><i class="fas fa-shoe-prints"></i> Sneakers</a>
                        <a href="#"><i class="fas fa-wallet"></i> Wallets</a>
                        <a href="#"><i class="fas fa-gem"></i> Accessories</a>
                    </div>
                </div>
                <a href="#about-us-section"><i class="fas fa-info-circle"></i> About Us</a>
                <a href="#contact"><i class="fas fa-headset"></i> Contact</a>
            </div>
        </div>
    </nav>

    <!-- Pro-Level Banner Section -->
    <section class="banner-section">
        <div class="banner-container">
            <button class="nav-btn prev-btn">&lt;</button>

            <div class="banner-slides">
                <!-- Banner 1 -->
                <div class="banner-slide active">
                    <img src="https://i.imgur.com/0X4bQWb.png" alt="Summer Collection">
                    <div class="banner-caption">
                        <h3>Summer Collection 2025</h3>
                        <p>Discover our premium summer fashion line with exclusive designs and comfortable fabrics.</p>
                        <a href="#products" class="banner-btn">Shop Now <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>

                <!-- Banner 2 -->
                <div class="banner-slide">
                    <img src="https://i.imgur.com/qgCxNSJ.png" alt="Limited Offer">
                    <div class="banner-caption">
                        <h3>Limited Time Offer</h3>
                        <p>Get 30% off on selected items. Use code LIGHTNING30 at checkout.</p>
                        <a href="#products" class="banner-btn">Get Offer <i class="fas fa-tag"></i></a>
                    </div>
                </div>

                <!-- Banner 3 -->
                <div class="banner-slide">
                    <img src="https://i.imgur.com/yCuNAJr.png" alt="New Arrivals">
                    <div class="banner-caption">
                        <h3>New Arrivals</h3>
                        <p>Explore our latest collection of premium watches and accessories.</p>
                        <a href="#products" class="banner-btn">View Collection <i class="fas fa-eye"></i></a>
                    </div>
                </div>
            </div>

            <button class="nav-btn next-btn">&gt;</button>

            <div class="indicator-dots">
                <span class="dot active" data-index="0"></span>
                <span class="dot" data-index="1"></span>
                <span class="dot" data-index="2"></span>
            </div>
        </div>
    </section>

    <!-- Advanced Search Bar -->
    <div class="search-container">
        <div class="search-wrapper">
            <div class="search-box">
                <input type="text" id="searchInput" class="search-input" placeholder="Search for products, brands, categories...">
                <button class="search-btn" id="searchButton"><i class="fas fa-search"></i> Search</button>
                <div class="search-suggestions" id="searchSuggestions">
                    <div class="suggestion-header">Popular Products</div>
                    <!-- Dynamic suggestions here -->
                    <div class="suggestion-header">Recent Searches</div>
                    <div class="recent-searches" id="recentSearchesContainer">
                        <!-- Recent searches will be added dynamically -->
                    </div>
                    <div class="search-history-controls">
                        <span class="clear-history" id="clearHistory">Clear History</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="product-section glass-background">
        <div class="section-header">
            <h2 class="section-title" id="products">Featured Products</h2>
            <div class="sort-controls">
                <span class="sort-label">Sort by:</span>
                <select class="sort-select" id="sortSelect">
                    <option value="popular">Popular</option>
                    <option value="newest">Newest</option>
                    <option value="price_low">Price: Low to High</option>
                    <option value="price_high">Price: High to Low</option>
                    <option value="rating">Rating</option>
                </select>
            </div>
        </div>

        <div class="product-grid" id="productGrid">
            <!-- Products will be dynamically generated by JavaScript -->
        </div>
    </div>

    <!-- About Us Section (New) -->
    <section id="about-us-section" class="product-section">
        <div class="section-header">
            <h2 class="section-title">About THE LIGHTNING</h2>
        </div>
        <div class="content-block">
            <p style="font-size: 1.1em; line-height: 1.8; color: var(--text-color);">
                <strong>THE LIGHTNING</strong> is your premier destination for high-quality fashion and accessories in Bangladesh. We believe that style should be accessible, unique, and a true reflection of your personality. Our curated collections feature the latest trends alongside timeless classics, ensuring there's something for everyone.
            </p>
            <p style="font-size: 1.1em; line-height: 1.8; color: var(--text-color);">
                From exclusive watches and premium apparel to stylish footwear and elegant accessories, every item at THE LIGHTNING is selected for its superior craftsmanship, durability, and aesthetic appeal. We are committed to providing an exceptional shopping experience, offering fast delivery, secure payment options, and dedicated customer support.
            </p>
            <p style="font-size: 1.1em; line-height: 1.8; color: var(--text-color);">
                Join the THE LIGHTNING community and illuminate your style. We are constantly expanding our collections and improving our services to bring you the best in fashion, right to your doorstep.
            </p>
            <a href="#" class="banner-btn" style="margin-top: 20px;">Learn More <i class="fas fa-arrow-right"></i></a>
        </div>
    </section>

    <!-- Customer Review Section (New) -->
    <section id="customer-reviews">
        <div class="section-header">
            <h2 class="section-title">Customer Reviews</h2>
        </div>

        <div class="review-form">
            <h4>Share Your Experience</h4>
            <form id="addReviewForm">
                <div class="form-group">
                    <label for="reviewerName"><i class="fas fa-user"></i> Your Name:</label>
                    <input type="text" id="reviewerName" placeholder="Enter your name" required>
                </div>
                <div class="form-group">
                    <label for="reviewerEmail"><i class="fas fa-envelope"></i> Your Email:</label>
                    <input type="email" id="reviewerEmail" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-star"></i> Your Rating:</label>
                    <div class="rating-input" id="reviewRatingInput">
                        <span class="star" data-value="1">&#9733;</span>
                        <span class="star" data-value="2">&#9733;</span>
                        <span class="star" data-value="3">&#9733;</span>
                        <span class="star" data-value="4">&#9733;</span>
                        <span class="star" data-value="5">&#9733;</span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="reviewComment"><i class="fas fa-comment-dots"></i> Your Review:</label>
                    <textarea id="reviewComment" rows="5" placeholder="Write your review here..." required></textarea>
                </div>
                <button type="submit" class="review-submit-btn">
                    <span class="btn-text">Submit Review</span>
                    <span class="loading-spinner" style="display: none;"></span>
                </button>
            </form>
        </div>

        <div class="reviews-list" id="reviewsList">
            <!-- Customer reviews will be dynamically loaded from backend -->
            <p style="text-align: center; color: var(--muted-text); padding: 20px;">No reviews yet. Be the first to share your experience!</p>
        </div>
    </section>


    <!-- Contact Section -->
    <section id="contact">
        <h2 class="section-title">Contact Us</h2>
        <p style="text-align: center; color: var(--muted-text); font-size: 1.1em; margin-bottom: 40px;">Have questions or need assistance? We're here to help!</p>

        <div class="contact-info">
            <div class="contact-method">
                <i class="fas fa-phone-alt"></i>
                <h4>Phone</h4>
                <a href="tel:+8801874580941">+880 1874 580941</a>
            </div>
            <div class="contact-method">
                <i class="fab fa-whatsapp"></i>
                <h4>WhatsApp</h4>
                <a href="https://wa.me/8801874580941">Chat on WhatsApp</a>
            </div>
            <div class="contact-method">
                <i class="fas fa-envelope"></i>
                <h4>Email</h4>
                <a href="mailto:ku0467807@gmail.com">ku0467807@gmail.com</a>
            </div>
            <div class="contact-method">
                <i class="fas fa-map-marker-alt"></i>
                <h4>Address</h4>
                <p>123 Fashion Street, Dhaka, Bangladesh</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h5>THE LIGHTNING</h5>
                    <p>Premium e-commerce platform offering high-quality fashion products with excellent customer service and fast delivery across Bangladesh.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-whatsapp"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h5>Shop</h5>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="#products">All Products</a></li>
                        <li><a href="#">New Arrivals</a></li>
                        <li><a href="#">Best Sellers</a></li>
                        <li><a href="#">Special Offers</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h5>Customer Service</h5>
                    <ul class="footer-links">
                        <li><a href="#contact">Contact Us</a></li>
                        <li><a href="#">FAQs</a></li>
                        <li><a href="#">Shipping Policy</a></li>
                        <li><a href="#">Returns & Exchanges</a></li>
                        <li><a href="#">Size Guide</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h5>Newsletter</h5>
                    <p>Subscribe to get updates on new arrivals, special offers and fashion tips.</p>
                    <form id="subscribeForm" class="newsletter-form">
                        <input type="email" name="email" placeholder="Your email address" required class="newsletter-input">
                        <input type="hidden" name="_subject" value="New Subscriber - THE LIGHTNING">
                        <button type="submit" class="newsletter-btn">Subscribe</button>
                    </form>
                    <div id="subscribeMessage" style="margin-top: 10px; font-size: 0.9em; color: var(--secondary-color);"></div>
                    <div class="payment-methods">
                        <img src="https://i.imgur.com/BOhbHvu.png" alt="bKash">
                        <img src="https://i.imgur.com/syZmIJ5.png" alt="Visa">
                        <img src="https://i.imgur.com/qNSwo6g.png" alt="MasterCard">
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARMAAAC3CAMAAAAGjUrGAAABAlBMVEX////tHCT3lB3sAADtFB3vTVHsAAv3jgD97e785OX3jQD2igDsAAf3rK33trf609P3kxrsABLtDhn+9PX4mh32o6XtEST3kQ//+vr70KvsACX5w8TwV1v959XsCBX5ycrvQUb72trycHP82Lr6u4L3srP83cP+8OT6w5P4oUb1mZv3mzX7y6L4qlz5xcb0eB/xZmn0jY/uLjT1nJ75tXbzg4X6wI3zbyD2jB7wTSLuLSP95dL4plPzhojyenz5sGvuNzzxWCHvQCP4nj/zckn1kGr2j1/3oXP0gljxVzvyY0T5s2X4omHxVC72jVPuKR3yZDj1hzT3lTf6y7n1gB/yYyAXgxxfAAANiklEQVR4nO2cjX+iOBrHgSBY8AWoBVqtVq3a1r5o25m+O512b3fv9u52727m//9XLgkBQghKlRnHab6fz+5YRSU/nrc8CUqSQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBALB96Pvr/sMfjSGY/OI+8J2t97p1Le2v/P5rJ/RsWEpJmsoW4PZAQjR1nJi6+PI9BRF8a7p57pTGWhtVQ5R13Vya2E01hWMOYqeGzwDW05gr/EMvztDwwskUbwz8tSODVSZAaz1JL8vp6YSYT6gZ5pyhRXkfWnykZJEsV5hnpkAjiLvSZNDQ6ExhtI2XxIZvJfy5SgpiWIpknSl8TV5JxXKrqkw6LuS1H63mnTr0n5KEsXSYR7meg8or/uMvzV+ryVJnpXSRNFhhX+ZSsRIk611n/M3ZgBgCXbmpSVRUIXf4RnKT67JdgmAutQ3eJIo+idJKnEMBXTXfdrfkg5w7Ikk6TxFPPO4Dyd/HEOBKg5Nb3x2uLu/7gEUzwmQ27+MpEOOJpb5CAe8fXXJ85269GAolufphvm4O1r8PRtED0ryt2tplM45ij6GtX15xs7+iCYdaT/0Nk83H4frHkhxtDS5/Sv0j+tUgPWMU/j6E+CXJzI4l0YGfbSyu+6xFETJltu/jXXJT1drx9AfmhrXRrAmzYQmqJRRfgpbadmy8+srrEGO2GhifoQvM9M/ta1VojYbqEk+OxMwzzZ/EtTTZPX3Y8scSbrFjA5e8rJMGYmjAVD6sFPrdLcg9fPq0znHuDxj000FZhz373941lgaJq+4pUO/qcd9pDYAvWpYo/l+ZAycuIzta3NB5akGUzB0nWSEtTwoyXnoN2oFzDro+NHu4aNimoYB/xt/Oh36EqfKC9pQmwpqjDi/wWEY+8l6DVtJWM+r4HKAjh5e64buRTMiy9Nh/k3Pj/TrRV/7Q1NyZPcff0ADMeJCA2NASbpEEvDchIeODqEeaZtIS2J56x7VSqAOgI2KV+9MOqXtBFk/aa7Zdg0euX9mcmeHHMyNDrE+HLX6+6uFuwGfqDHjSu0Zh1cwgw9H+RVRvE/rHtZKzGB5+ifWQh9KlBfg9Ysn1G50nLqE2vi5FcENqA0GzXTdX5CZoPBhUsPySTABLfjIP+bOljPYbM+RJg50nX9iEzDpGt3oS0FfDTzBB/txZEWJRjcg8B9eP07ZeM/BZvIvbCaWIg0jY/Ae4YtV+CKowgd90wr1MMefjvrDfchD//TwGErDycObXdijaOL+Gw/LepT6kSZ4hRgGE4DyTT9wKc/wDofscPdPX01GFmximwtKOvKfQckFLX431ATvJNjRaEl085qqTPsPo0id0ZFHqxItLm8ocNiy+9c4GMthXJ5gM2kHjvOAJNH1o4SFPJiG6Z0dhSr1x0akyoZ7Di4/3P8orCY4SNYADq8jOFovPaEbmqirZpjHp0G3sa/oq3vO1mA6m/Sm58t/wurglrM7jjQJfcdA3eaW1kLHjD3FOOZ0WUmjxdJx81pCi+5WynOqB6UctIJVsx0ZVOy249gATImt1XK9P2ayuo0i15Ff/stqYo0lVNWr6As+6pZ5yn3zazQN1HV8xL7nsZ5z0FZzAHbgoee2Fi+U2Nhr4VQs1/upT1p9XaWFXOcuthOSi/EQa/jz903Py2jFj+gCT8c92GOd8RzeelAaDQowZVZJcKWIT/AtFKAJdp2/GlEQIdNiHGEnH9ARY/010xzpyZFljNGbzpick1OTHelDauGorW6tQ5M61uQizqFBHYv2VUiSg/7XNx+z355c9bDwllFfSqyot8AcyDhsDQyakSQOfgkW17IK6qEmthbgkGO0LFZfp61qtCZoL5JBnAilAHSEPkcSSXpMzgr14//50rRGH+HXsyHNKvukOvCjnS2gdV7eLjcnuN0JuoEm9k4VM5hhUZzeoBozGFB/NVeVBBexsSaKBwMCips6iglY8P547vv7zLzQMi/r4CTvt/uBJmirxiDcJ0dCK5x9XqK2uP0cPBvucKlViKtRlJv1/CNeDPb2WBNTkg7RlTeioDqen9pS7fpbF7Rneb+dtKuQufdCp+jFL0/i/YTRDpe0JtVLUAFgVtzWhmCFItIEaoGvvBm+/rBoUXzMzP9u92S1lffbKU0OSCgFHer1nrZQk5pTwe9sgw95v3URIKkJ9Bl05VFcCVi4Hn7Itpn2ZPky77fzNEm4Qas9X5NyKU5W2mUxO8jKrCZHOKC8ofuxyzaa9t6wNZTSZEJ8J3C8rdATwm1RfE0Gie3LTu5rMZdgM4l70whjLEwycMaD004+howmt+5ymuyEbgKmnQ9o1XXmxyeYoUmPqWi0QtwnWKZwv4aaKAauOXT+rSk89g2OJplxeat6clKNvYPSJN56awe7F2wb2wrRiqPJ9mVqTb+QvctEk8+xJg9oL5vOn97wGDGafJmjSfcAaDasz6IkQWki7bBlrOrgj4nTNSbSpFthC1w1maGXhWhyFw0JWcjQWEGTi2xNTiLvbxPPoDWBLzuhDwSP2hP0NF+T6nlqJiDLxcTYUJMv4ZDwfFh5gyaM7zS+ZsaTJ3oUto2mJQlNpO4EhhEYSuRqJ0jCOAdxNVGpfBMKDQoq3MpEk5toUGjy189oDfBgYmzjLksTdrcx6mkmNYF0m7UmnsPhNOSgQoerSSQEnBKRSaYzWUEHGlJc30eJR9FRO03JH2NPGU3QaT5zjiunbB2KktIkInAN5IR8TSJ7ey4PSBTupD5kSYJvpBIPXr8b5t8RwOx9g2Usv47tpbfCga6f1KQVxyGiSXeBJqAXZ6alNWAJFoPdu9s4yqLpX347sRK1fePGDcuuJJGZwDl/dCNhu5zQZBvE5h+UtYs0wd1iPLUvznXCqRcMKLGhoCibu6fJpB0cTngpkVxMx5kOqtMS2T+pklBANKlqgLyz/uxEL8zRRJsFb8OPC8nDmBNS98TOo7xpGxq7H9CV8c7QFEHp7hwEf5WfgrQcFu6BJlAhULoaVJ8uw6SN/CFbE6eEnwniSXHhJNyVRTuPNb9jkoTZi3Pj0udPQRwnsr8t2YnGFmqChFBp31Kz8w5+LqhHggZdgbfLhCX1C2Uoev4Nv8x+wMYLvn6cAwFt3z68pv5zLArR5IAtTMFAmqNJhXxa0Kwr8pZEMvF0P1NDM3KHE6Z7grJOoisUgV00bB/7oFWW/LjGIJqcsDfW4Vu5MzUJb/SuB0csKwCHqU2cJ46y+Zd7+5wIK1dqnCOx9GHO9YED5Ylv8CDP+2xVh0NEliZRUMXJSz1YVgAORGXGUPJ5j88E2C97lJsnwTE2UgvA8tOP7SLUqpkQBUzJsXxNokkVdv/8vb08kMSTMBTFzHUfDtO0D6KJWuIdGuQ3tRz9YcMRO4wmdI9IDXuJGZrE9Qg2rwLLE8hTOzSUOPUE27YW8ZEp6y+wmVQGvGODQKiCabfc7YUBoKoxmkh1GTgq2swP5HBNIkMTykOxJrwgtjSRW9OpB6bYhaKwN9s2yAD5R5Ph22Q1i649EvOdZu/ZlktPcbWRoQmVe9XCNYkWL927C0oUb5Eop6wkOMDK7Yz+3wnbFEOazNopTVKwmoQ1cHwEyuHF+k4c2RLeA91nbkw5ZCUJPCdzfGxSwUGxmTkvjmE0kbozoKkJDdD8pNC8I1G3DN/TuUfJ2mCBSO8LvXWD0JcZ/2tJUQCKF+UlNIFfvnMZ7BUiYBMs+GckYkNJhBSFvxEHcWqwqzqNezLU7GbXSaLPFmi3lCaQzhP1Nw4xRd8KHxXV7l1SFM+85qiya6U2DzdeiJnMc+tafIMlIAnbWVKTBDhLcCvFFehGVzBZpWBVzhK/Q+YPrznbYUl8XXS1/GkbAE2rADlcJ5eL0ERCdlJ0QJFmdqYo6N7Y8fXRLuT08MwzefepxJIsbGJs1XZ2BvGumWI0wU0gDUaYTpH3w8dzVDam4GiL9pKjfeT8jeSh4yxxrYrRJCgI26j0eesJzKEOaFF4A8+kcXvvhlHizXGuGE2kwtczMNT+Ovf+823KVLIluQgVCXZcv42CNInyvFadd9hbKVF99WRFO1cR5W4vfFdliRXsgjRB9+59A01i+8Om8jWXqTQu5MhK7GVm62pBmmyrJKsX+6Mj2xrd+nNfLhYrcvsSGUnUfn4bsrZQk1mw129BqNouAbttk5ZLcWwlNri47ssXZZ6tNG7v9txYkiX3w0zRLHn+9s3uAcgTvuvTDyfF/zTNVnL3AlTlJkuVRuPihVJEbj8vu8u93AILf3poAOy1/YpVmV5gCGS5u4DjbyTlaFgXd65LH6dxe2s5aaoLf8rMnxXbCngL/gHbOnfdvfvPN19ukRRInNsvN3f3e0lF8KrtKvzgv+4242x1cSHQUe7vZfiPy+iBGorFJsAfjxpw0qrMQ5N/6h/dwmy3Mn7okotKN3d+Ypoq/5cueYoc/PxGQrgCeVRRgVxwI+eHxr/i/MJyEgdcvidFMLUS0DJlcSqgV+j9IZtCeacEgJ3SBd3UOalt+B3EK+CfT/G9a5qN0VAra3L1Li0kSbnerF5NIVeDZvcHrzkFAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgK4v8KHAgHpmmjUAAAAABJRU5ErkJggg==" alt="Nagad">
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAT4AAACfCAMAAABX0UX9AAAAkFBMVEX4+PiGOIj///+BLIODMIX9//1+IYC/nsCoe6no4Oj39Pe8mb2FNYeEMob7+Pv7/fuPTJGtga5/JoF8HH7Hq8iLQY3EpsXk1uSyibPRutKcZJ58Hn7v5u/h0eGndqixh7LYx9nOtc+YW5q4krmga6Lq3uqNRo+UVJbcy92eZp95E3xyAHWjb6T07vXRudLWwdeLt/fmAAAKBklEQVR4nO2da3eqPBOGdw4GqolKCHgsCKhQq+X//7s3JKB4wA+v1a4n5t5rV051La7OZCaTEP79s7KysrKysrKysrKysrKysrKysrKysrKysrKy+i9p1OvBUf/w8ZAO/RHs9UZ/fS+v1ggeVo6bA8TJQ+II5K6zOsB3Itjri5RzhCkFD4tSjDhPRb/313f1IvWWHufscXBtMc695TsAHPWnO/y77LTwbto33oVhwdAz4FVCrIB/fX/PVc/xf6G96xL1HaMdGHrkefAqEc9g+4MRfy49ALi5/GD8dHqSX2wov17yZM/VIomR7d/o4yX0JL8PE/MXmP9yqtwllhvovqPZi4xPmt/MPPMbBU9M+M5FA+PwjcqXGZ80v9I0fnD+opavEpub1vq9KuxqkY+/vt/f1Ui8IGM+iQuzvBfuX+i70nv3hnkveFncrUTBX9/v72r50qZPeu/yr+/4NzX6fGnTJ/F9mtT4jWavxmdUx6PnPK1C34HPqNDbm74YHwqNwhc/ZXAN0K6/CgpNKvr13GfgY2QruvAZNWb0BHwUkX0BJx0JkcV3V4yzwQFCmHV4r8V3R8hPS6jEOjozFl+XKOfTjYYHJ4suwBbfTbHFOBnCRoPOyGvxXUuGi+gTttQ5AGDxXYkR6hxqbtoAN37XtRbfJRB/Xh6trjzc912L70yUo2x5hDd0ayMcdxYRLb6T8CJvhQtYjPt6Y9npuxZfIxku3Ek7XExpg/JOGcfiU2IEhP02vOUWHA2x23ctPlAZnr8u4JnEbnukd28AwOKjnLXChVL/yx+fGkFxp4b49vjotoQXWiHeogfzO4N3b48PsCY9aRT7aNuid+iOuxYf0A9qnGhtAoTb9ODdeQsWXwWBDBpYjk9x23MhTO/NW7D4lDgWylFTDi7o9e/5rsVXi/KghDPOLunB5O7IscXXAihJ0Qt68OvunCOLrwVQ/l9cpoA6Z2aILBYcXaUwxuNTz0FXiS/SH7JvSwjHhMkzvNlRUmzI5ByfmvXBFmn4udkUTr5g74WPJ5PPz4lAlGefxZQARoXc//E27q6clLzaKWN5ifxU6TGfSYtr4avmC/J5M+YBJzl/K3y1NZXf6nO1CFTTtnRgXMDhViXMh1CjUbOikdyJkiO9oaTlO21zzBZvhm8ebCF04TL9OsB1CVf5OA9CaWJ9lMDJ+usrDfIULoNcXY892c3YHa2t5NJ+z93ZIe+Fb7NZwmUCI85jGB6gzyjl0sb6eKfDhOAsgJv6+V/2BacyQjThN2IAbc7xwQi/Fb7KP/MEDnY7AQcbmBPO/cpfp98buJRtnsQl8dU2JRMX6a/46+S7gKhiVv/zc3gWjN8Fnycd7juXjriCMBjA4exn5jiwhDB2YT8RSdjGB4AaF+K6F7dSgcL/qeoIMjZndfOH3gffBo7nsu/gx8rvEEnq0DGNJAcVNIYLie9UE9Wpia/KWPXX+WKtOJJI4TuhNh4fW3sBSr04QDiKkDQbvnVdd597OZl7MQ/kToQp8PaYNtK/qPJnAvQhXp/1dVH6lD6bjQ9zgiQchuUPWv2oWjeMOWPVUYDlDvd9Vh1rEScEV2VUCIvLMj1SNtwa/DAZH+ZecTjvwqpY0KQiUyxRuauLS+CwX3gcAxTBGI3hbQ0XxuNbRIfr21ZVgToCEEDW15fo6BotAAkD1onPNx2fL27dNq8eI1WbpQ8Wzo1LaiU+QJS+LT5yi16FjwK9hSm/Q0/yIydDfTt8OLp92xygqdpyOFvfoyezFtSNDxqOj9eN2iQc1CpqfFwnH4D6dWlvc7xkpcHWNav+Ed9scCVkND6sMwy436Fafljj81U9arJgtX26x0sWA33JrjZL2ZvT+DyizvOdlO/zatvsxIXoyaH7U3UOCc2mbvpCxHUEcVuXqLZwyADSXd4JafCpb2X7cjYrZ2JPWOtXjMRXm1hrlKzBx1JNDfvKvdsTR4/4gK/oD8/x+U3pZZkiw/Eh3YqhG/i0Z86Zrz7bg+AnfEhXDABr4aP5KXB8YbPxYXWXg1v49upUysg14RM+XVsJ2viqMn6jIaZG49Ns2k/3HvHNdavItH+vyC18dbeOt5yXMtiSY3bk1eONw9bDQMfQsVX3n6F6FCRg1/go0iMifgsfzvoHJXVkY3afV8OS6cmxtsRrfIArNCWv27fNafS2wUfRZ90utkMHXih9q4BteK+jtjF4cHG94PWuyfsWKoD2SZ3BwEPM6rWtdzrvY9jTZ8ZNn9fdqaWvKxF/8gb4ALkYH2vafK6GImE14MPD25cwoCdczUh3p615QNVUfADdLEVJfHXit9kB/tGBT1VrDuhOySAzO3RUq8M1kwWWg3nazF6uClbae2GMKL2FuMIH/HK4Zd34Dk1INxYfYEyHVufbm828b+eIr2nackpRcY1G4QNYReQOfMMxMx4foH4k7SwkS20vmh8/ZjWb6jFJfz+5gqMDsR4XuYlvBY7JjsH4pAkR4DYTLpY7VWiqbly1fqWeVsAIjbLzWlR7FlrgXJWq4oC0skmT8VXT0faNzUSnQpOMuc6xVEAZOtfZFxD/4iwJUGuSmuH46lS4UoiOnCTUigpjMkOudgHWhzGrLpFfcYIVi0Ad0rsMgZ9MrNF7OC841k6qEMKjJBQiDEWSU56JUKzdKE2EEHMUh478l8f7tTyfYe6IgSM1kEedldzMkHRiJwz3sUikq0ee4RWXk/cey0wp2o8/0ygpgmgMcByuQmeznIfTIsl4LMpkksWb5V78TKZksM8yJ567SRkORJqCaYwCp4glQOGk4cYRP+9ifc2wJCwJSsZilYUTp/gqowJMHSdaZ95gIDJ/svUG2cwbzMV8Ln58sSvFxJtu1mHoZSJZiZiIMvJEuPfkjzDxonexPhknfip6sgeGp4Uo1uFEFGPOw6QYONEsmqRTMeWDpHSK0M3KaDULXe5MxTyJ575XhtMVLXEaMw7KOHHyWZan5W49exvrqyYFed626qNizBDDsv2n1Rtf5B7jcpthBhDGuAoMXB6sdoE8waqIglEw55QytQqYPEkjLDfY+MvMcunNFdSayUH/ly7essXODxq2gppdv+8R2dUjH5Jdu/QhvXzlXGLUyrn/lq+2PqPWbbarhj8mu2b9Q3r1GxMSo5q+l7+vw7Cm79VvizGpz1HJvqvoMdk3ZT0k+562x3R/3ZpfFEvNylq07DsqH1Mv6Vqk+le1MPMNqdJ9p694P+/URNdVgp59O/Qjsu8mf0zQWTwx/aMLx2h6kl/Bnla3R7QwnJ7MX/5lu6e8uAjvsn9GZiwX6i1jzn85hWacx0tDE5Yr9frJnHOE6S+0g5RixPk86b8LvEojeFg5bl7PQHtAGOSuszrAd3DbM416PSjvuv+Q5N8B9npvx87KysrKysrKysrKysrKysrKysrKysrKysrK6j+u/wE4eNw2K5ywTQAAAABJRU5ErkJggg==" alt="Rocket">
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p> 2025 THE LIGHTNING. All rights reserved. | Designed with <i class="fas fa-heart"></i> by THE LIGHTNING Team</p>
            </div>
        </div>
    </footer>

    <!-- Firebase SDK Imports (MUST be here for Canvas environment) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, addDoc, setDoc, updateDoc, deleteDoc, onSnapshot, collection, query, where, getDocs, serverTimestamp, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase Initialization (MANDATORY globals from Canvas environment)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        let userId = null; // Will be set after auth state is determined

        // --- Core Application Logic ---
        document.addEventListener('DOMContentLoaded', async function() {
            // Simulate loading for 2 seconds (visual effect)
            setTimeout(function() {
                document.getElementById('loadingOverlay').style.opacity = '0';
                setTimeout(function() {
                    document.getElementById('loadingOverlay').style.display = 'none';
                    // Show welcome notification after loading
                    showWelcomeNotification();
                }, 700); // Match CSS transition duration
            }, 2000); // Shorter loading time

            // --- Firebase Authentication ---
            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    userId = user.uid;
                    console.log("User logged in:", userId);
                    // Fetch user-specific data, e.g., cart, wishlist, reviews
                } else {
                    // Sign in anonymously if no user or token is provided
                    if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                        try {
                            const userCredential = await signInWithCustomToken(auth, __initial_auth_token);
                            userId = userCredential.user.uid;
                            console.log("Signed in with custom token:", userId);
                        } catch (error) {
                            console.error("Error signing in with custom token:", error);
                            // Fallback to anonymous sign-in if custom token fails
                            const userCredential = await signInAnonymously(auth);
                            userId = userCredential.user.uid;
                            console.log("Signed in anonymously:", userId);
                        }
                    } else {
                        const userCredential = await signInAnonymously(auth);
                        userId = userCredential.user.uid;
                        console.log("Signed in anonymously:", userId);
                    }
                }
                // Once userId is determined, proceed with data loading
                initializeAppData();
            });

            async function initializeAppData() {
                // Initialize cart and wishlist from localStorage (fallback) or Firestore
                // For now, continue with localStorage, but backend integration will extend this.
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
                let recentSearches = JSON.parse(localStorage.getItem('recentSearches')) || [];
                let darkMode = localStorage.getItem('darkMode') === 'true';

                // Apply dark mode if enabled
                if (darkMode) {
                    document.body.classList.add('dark-mode');
                    document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i>';
                }

                // Update counts on load
                updateCartCount();
                updateWishlistCount();
                updateRecentSearches();
                renderProducts(); // Render products on initial load
                renderFilterOptions(); // Populate filter options dynamically
                loadReviews(); // Load existing reviews from Firestore


                // --- Event Listeners ---

                // Mobile menu toggle
                document.getElementById('mobileMenuToggle').addEventListener('click', function() {
                    document.getElementById('navLinks').classList.toggle('active');
                    this.innerHTML = document.getElementById('navLinks').classList.contains('active') ?
                        '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
                });

                // Dropdown toggle for mobile
                document.getElementById('categoriesDropdown').addEventListener('click', function() {
                    if (window.innerWidth <= 992) {
                        this.classList.toggle('active');
                    }
                });

                // Theme toggle
                document.getElementById('themeToggle').addEventListener('click', function() {
                    document.body.classList.toggle('dark-mode');
                    const isDarkMode = document.body.classList.contains('dark-mode');
                    localStorage.setItem('darkMode', isDarkMode);
                    this.innerHTML = isDarkMode ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
                });

                // Translate button (Google Translate Widget - will be injected if user clicks)
                document.getElementById('translateButton').addEventListener('click', function() {
                    if (!document.getElementById('google_translate_element')) {
                        const script = document.createElement('script');
                        script.type = 'text/javascript';
                        script.src = 'https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
                        document.body.appendChild(script);

                        window.googleTranslateElementInit = function() {
                            new google.translate.TranslateElement({
                                pageLanguage: 'en',
                                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                                autoDisplay: false
                            }, 'translateButton'); // Inject into the button's parent
                        };
                        // Hide button text/icon after init, Google widget takes over
                        this.style.display = 'none';
                        // Add a div where the actual widget will appear
                        const translateDiv = document.createElement('div');
                        translateDiv.id = 'google_translate_element';
                        this.parentNode.insertBefore(translateDiv, this.nextSibling);
                    }
                });

                // Login/Register modal toggle
                document.getElementById('openLogin').addEventListener('click', function(e) {
                    e.preventDefault();
                    openModal('loginModal');
                });

                document.getElementById('showRegister').addEventListener('click', function(e) {
                    e.preventDefault();
                    closeModal('loginModal');
                    openModal('registerModal');
                });

                document.getElementById('showLogin').addEventListener('click', function(e) {
                    e.preventDefault();
                    closeModal('registerModal');
                    openModal('loginModal');
                });

                // Login Form Submission (Firebase Auth)
                document.getElementById('loginForm').addEventListener('submit', async function(e) {
                    e.preventDefault();
                    const email = document.getElementById('loginEmail').value;
                    const password = document.getElementById('loginPassword').value;
                    const btn = this.querySelector('button[type="submit"]');
                    const btnText = btn.querySelector('.btn-text');
                    const spinner = btn.querySelector('.loading-spinner');

                    btnText.style.display = 'none';
                    spinner.style.display = 'block';

                    try {
                        await signInWithEmailAndPassword(auth, email, password);
                        Swal.fire({
                            icon: 'success',
                            title: 'Login Successful',
                            text: 'Welcome back to THE LIGHTNING!',
                            timer: 2000,
                            showConfirmButton: false
                        });
                        closeModal('loginModal');
                        sendNotification('User logged in', email);
                    } catch (error) {
                        console.error("Login error:", error.message);
                        Swal.fire({
                            icon: 'error',
                            title: 'Login Failed',
                            text: error.message,
                            showConfirmButton: true
                        });
                    } finally {
                        btnText.style.display = 'block';
                        spinner.style.display = 'none';
                    }
                });

                // Register Form Submission (Firebase Auth)
                document.getElementById('registerForm').addEventListener('submit', async function(e) {
                    e.preventDefault();
                    const name = document.getElementById('registerName').value; // Not used by Firebase Auth directly
                    const email = document.getElementById('registerEmail').value;
                    const password = document.getElementById('registerPassword').value;
                    const confirmPassword = document.getElementById('registerConfirm').value;
                    const btn = this.querySelector('button[type="submit"]');
                    const btnText = btn.querySelector('.btn-text');
                    const spinner = btn.querySelector('.loading-spinner');

                    if (password !== confirmPassword) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Registration Failed',
                            text: 'Passwords do not match.',
                            showConfirmButton: true
                        });
                        return;
                    }

                    btnText.style.display = 'none';
                    spinner.style.display = 'block';

                    try {
                        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                        // Optionally save user name to Firestore or update profile
                        console.log("User registered:", userCredential.user.uid);
                        Swal.fire({
                            icon: 'success',
                            title: 'Registration Successful',
                            text: 'Your account has been created successfully!',
                            timer: 2000,
                            showConfirmButton: false
                        });
                        closeModal('registerModal');
                        sendNotification('New user registered', email);
                    } catch (error) {
                        console.error("Registration error:", error.message);
                        Swal.fire({
                            icon: 'error',
                            title: 'Registration Failed',
                            text: error.message,
                            showConfirmButton: true
                        });
                    } finally {
                        btnText.style.display = 'block';
                        spinner.style.display = 'none';
                    }
                });

                // Newsletter subscription (using Formspree as before)
                document.getElementById('subscribeForm').addEventListener('submit', async function(e) {
                    e.preventDefault();
                    const form = this;
                    const formData = new FormData(form);
                    const subscribeMessageDiv = document.getElementById('subscribeMessage');

                    try {
                        const response = await fetch(form.action, {
                            method: 'POST',
                            body: formData,
                            headers: {
                                'Accept': 'application/json'
                            }
                        });

                        if (response.ok) {
                            subscribeMessageDiv.innerHTML = '<p style="color: var(--primary-color);">Thank you for subscribing!</p>';
                            form.reset();
                        } else {
                            throw new Error('Network response was not ok');
                        }
                    } catch (error) {
                        subscribeMessageDiv.innerHTML = '<p style="color: var(--accent-color);">There was a problem with your submission. Please try again.</p>';
                    }
                });

                // Product quick view (delegated to renderProducts now)
                document.getElementById('productGrid').addEventListener('click', function(e) {
                    const quickViewBtn = e.target.closest('.quick-view-btn');
                    if (quickViewBtn) {
                        const productId = quickViewBtn.dataset.productId;
                        const product = products.find(p => p.id === productId);
                        if (product) {
                            openProductModal(product);
                        }
                    }
                });

                // Add to cart buttons (delegated to renderProducts now)
                document.getElementById('productGrid').addEventListener('click', function(e) {
                    const addToCartBtn = e.target.closest('.add-to-cart-btn');
                    if (addToCartBtn) {
                        const productId = addToCartBtn.dataset.productId;
                        const product = products.find(p => p.id === productId);
                        if (product) {
                            addToCart(product);
                        }
                    }
                });

                // Wishlist buttons (delegated to renderProducts now)
                document.getElementById('productGrid').addEventListener('click', function(e) {
                    const wishlistBtn = e.target.closest('.wishlist-btn');
                    if (wishlistBtn) {
                        const productId = wishlistBtn.dataset.productId;
                        const product = products.find(p => p.id === productId);
                        if (product) {
                            toggleWishlist(wishlistBtn, product);
                        }
                    }
                });


                // Cart and wishlist icons
                document.getElementById('cartIcon').addEventListener('click', function(e) {
                    e.preventDefault();
                    openCartSidebar();
                });

                document.getElementById('wishlistIcon').addEventListener('click', function(e) {
                    e.preventDefault();
                    openWishlistSidebar();
                });

                document.getElementById('floatingCartBtn').addEventListener('click', function() {
                    openCartSidebar();
                });

                // Message Floating Button
                document.getElementById('floatingMessageBtn').addEventListener('click', function() {
                    // This could open a chat widget, a contact form, or direct to WhatsApp
                    const phoneNumber = "8801874580941"; // Replace with your number
                    const message = encodeURIComponent("Hello, I have a question about your products.");
                    window.open(`https://wa.me/${phoneNumber}?text=${message}`, "_blank");
                });

                // Filter sidebar toggle
                document.getElementById('filterToggle').addEventListener('click', function() {
                    document.getElementById('filterSidebar').classList.add('open');
                    document.getElementById('overlay').classList.add('show');
                });

                document.querySelector('.close-filter').addEventListener('click', function() {
                    document.getElementById('filterSidebar').classList.remove('open');
                    document.getElementById('overlay').classList.remove('show');
                });

                // Apply filters
                document.querySelector('.apply-filters').addEventListener('click', function() {
                    applyFilters();
                    document.getElementById('filterSidebar').classList.remove('open');
                    document.getElementById('overlay').classList.remove('show');
                });

                // Reset filters
                document.querySelector('.reset-filters').addEventListener('click', function() {
                    resetFilters();
                });

                // Price range slider
                const priceRange = document.querySelector('.price-range');
                const minPriceInput = document.getElementById('minPrice');
                const maxPriceInput = document.getElementById('maxPrice');

                // Initial sync
                priceRange.value = maxPriceInput.value;

                priceRange.addEventListener('input', function() {
                    maxPriceInput.value = this.value;
                    if (parseInt(minPriceInput.value) > parseInt(maxPriceInput.value)) {
                        minPriceInput.value = maxPriceInput.value;
                    }
                });

                minPriceInput.addEventListener('change', function() {
                    if (parseInt(this.value) > parseInt(maxPriceInput.value)) {
                        this.value = maxPriceInput.value;
                    }
                });

                maxPriceInput.addEventListener('change', function() {
                    if (parseInt(this.value) < parseInt(minPriceInput.value)) {
                        this.value = minPriceInput.value;
                    }
                    priceRange.value = this.value; // Keep slider in sync
                });


                // Search functionality
                document.getElementById('searchInput').addEventListener('focus', function() {
                    document.getElementById('searchSuggestions').classList.add('active');
                });

                document.getElementById('searchInput').addEventListener('blur', function() {
                    setTimeout(() => {
                        document.getElementById('searchSuggestions').classList.remove('active');
                    }, 200);
                });

                document.getElementById('searchButton').addEventListener('click', function() {
                    const searchTerm = document.getElementById('searchInput').value.trim();
                    if (searchTerm) {
                        searchProducts(searchTerm);
                        addToRecentSearches(searchTerm);
                    }
                });

                document.getElementById('searchInput').addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const searchTerm = this.value.trim();
                        if (searchTerm) {
                            searchProducts(searchTerm);
                            addToRecentSearches(searchTerm);
                        }
                    }
                });

                document.getElementById('clearHistory').addEventListener('click', function() {
                    recentSearches = [];
                    localStorage.setItem('recentSearches', JSON.stringify(recentSearches));
                    updateRecentSearches();
                });

                // Banner slider
                let currentSlide = 0;
                const slides = document.querySelectorAll('.banner-slide');
                const dots = document.querySelectorAll('.dot');
                const prevBtn = document.querySelector('.prev-btn');
                const nextBtn = document.querySelector('.next-btn');

                function showSlide(index) {
                    const bannerSlides = document.querySelector('.banner-slides');
                    bannerSlides.style.transform = `translateX(-${index * 100}%)`;

                    slides.forEach((slide, i) => {
                        slide.classList.toggle('active', i === index);
                    });
                    dots.forEach((dot, i) => {
                        dot.classList.toggle('active', i === index);
                    });

                    currentSlide = index;
                }

                dots.forEach(dot => {
                    dot.addEventListener('click', function() {
                        showSlide(parseInt(this.dataset.index));
                    });
                });

                prevBtn.addEventListener('click', function() {
                    currentSlide = (currentSlide - 1 + slides.length) % slides.length;
                    showSlide(currentSlide);
                });

                nextBtn.addEventListener('click', function() {
                    currentSlide = (currentSlide + 1) % slides.length;
                    showSlide(currentSlide);
                });

                // Auto slide change every 5 seconds
                setInterval(() => {
                    currentSlide = (currentSlide + 1) % slides.length;
                    showSlide(currentSlide);
                }, 5000);

                // Sort products
                document.getElementById('sortSelect').addEventListener('change', function() {
                    sortProducts(this.value);
                });

                // Close modals and sidebars when clicking overlay
                document.getElementById('overlay').addEventListener('click', function() {
                    document.querySelectorAll('.modal.show, .cart-sidebar.open, .wishlist-sidebar.open, .filter-sidebar.open').forEach(el => {
                        if (el.classList.contains('modal')) {
                            closeModal(el.id);
                        } else if (el.classList.contains('cart-sidebar')) {
                            closeCartSidebar();
                        } else if (el.classList.contains('wishlist-sidebar')) {
                            closeWishlistSidebar();
                        } else if (el.classList.contains('filter-sidebar')) {
                            el.classList.remove('open');
                            document.getElementById('overlay').classList.remove('show');
                        }
                    });
                });

                // Close buttons for modals and sidebars
                document.querySelectorAll('.close-modal, .close-cart, .close-wishlist, .close-login').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const parent = this.closest('.modal, .cart-sidebar, .wishlist-sidebar, .login-modal');
                        if (parent.classList.contains('modal')) {
                            closeModal(parent.id);
                        } else if (parent.classList.contains('cart-sidebar')) {
                            closeCartSidebar();
                        } else if (parent.classList.contains('wishlist-sidebar')) {
                            closeWishlistSidebar();
                        } else if (parent.classList.contains('login-modal')) {
                            closeModal(parent.id);
                        }
                    });
                });

                // Continue shopping buttons
                document.querySelectorAll('.continue-shopping-btn').forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        e.preventDefault();
                        if (this.closest('.cart-sidebar')) {
                            closeCartSidebar();
                        } else if (this.closest('.wishlist-sidebar')) {
                            closeWishlistSidebar();
                        }
                    });
                });

                // Product modal quantity controls
                document.getElementById('productModal').addEventListener('click', function(e) {
                    if (e.target.classList.contains('quantity-btn')) {
                        const quantityInput = document.getElementById('modalQuantityInput');
                        let currentVal = parseInt(quantityInput.value) || 1;
                        if (e.target.classList.contains('plus')) {
                            quantityInput.value = currentVal + 1;
                        } else if (e.target.classList.contains('minus') && currentVal > 1) {
                            quantityInput.value = currentVal - 1;
                        }
                    }
                });

                // Product modal Add to Cart
                document.getElementById('productModal').querySelector('.add-to-cart-btn-modal').addEventListener('click', function() {
                    const productId = this.dataset.productId; // The product ID should be set when modal is opened
                    const product = products.find(p => p.id === productId);
                    if (product) {
                        const quantity = parseInt(document.getElementById('modalQuantityInput').value);
                        addToCart({ ...product, quantity: quantity });
                        closeModal('productModal');
                    }
                });

                // Product modal Buy Now
                document.getElementById('productModal').querySelector('.buy-now-btn').addEventListener('click', function(e) {
                    e.preventDefault();
                    const productName = document.getElementById('modalProductTitle').textContent;
                    const productPrice = document.getElementById('modalProductPrice').textContent;
                    const phoneNumber = "8801874580941"; // Replace with your number
                    const message = encodeURIComponent(`Hi! I'm interested in ${productName} (${productPrice}).`);
                    window.open(`https://wa.me/${phoneNumber}?text=${message}`, "_blank");
                });

                // Product modal Wishlist button
                document.getElementById('modalWishlistBtn').addEventListener('click', function() {
                    const productId = this.dataset.productId; // The product ID should be set when modal is opened
                    const product = products.find(p => p.id === productId);
                    if (product) {
                        toggleWishlist(this, product);
                    }
                });


                // Collapsible filter sections
                document.querySelectorAll('.filter-title').forEach(title => {
                    title.addEventListener('click', function() {
                        const targetId = this.dataset.toggle;
                        const content = document.getElementById(targetId);
                        const icon = this.querySelector('i');

                        if (content.classList.contains('show')) {
                            content.classList.remove('show');
                            this.classList.add('collapsed');
                            icon.classList.remove('fa-chevron-down');
                            icon.classList.add('fa-chevron-right');
                        } else {
                            content.classList.add('show');
                            this.classList.remove('collapsed');
                            icon.classList.remove('fa-chevron-right');
                            icon.classList.add('fa-chevron-down');
                        }
                    });
                });

                // Set initial state for filter titles based on 'show' class
                document.querySelectorAll('.filter-title').forEach(title => {
                    const targetId = title.dataset.toggle;
                    const content = document.getElementById(targetId);
                    const icon = title.querySelector('i');
                    if (!content.classList.contains('show')) {
                        title.classList.add('collapsed');
                        icon.classList.remove('fa-chevron-down');
                        icon.classList.add('fa-chevron-right');
                    }
                });

                // Review Rating Stars
                let selectedRating = 0;
                document.querySelectorAll('#reviewRatingInput .star').forEach(star => {
                    star.addEventListener('click', function() {
                        selectedRating = parseInt(this.dataset.value);
                        document.querySelectorAll('#reviewRatingInput .star').forEach(s => {
                            if (parseInt(s.dataset.value) <= selectedRating) {
                                s.classList.add('selected');
                            } else {
                                s.classList.remove('selected');
                            }
                        });
                    });
                    star.addEventListener('mouseover', function() {
                        const hoverValue = parseInt(this.dataset.value);
                        document.querySelectorAll('#reviewRatingInput .star').forEach(s => {
                            if (parseInt(s.dataset.value) <= hoverValue) {
                                s.style.color = '#FFBF00';
                            } else {
                                s.style.color = '#ccc';
                            }
                        });
                    });
                    star.addEventListener('mouseout', function() {
                        document.querySelectorAll('#reviewRatingInput .star').forEach(s => {
                            if (parseInt(s.dataset.value) <= selectedRating) {
                                s.style.color = '#FFBF00';
                            } else {
                                s.style.color = '#ccc';
                            }
                        });
                    });
                });

                // Submit Review Form (Firestore)
                document.getElementById('addReviewForm').addEventListener('submit', async function(e) {
                    e.preventDefault();
                    if (!userId) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Login Required',
                            text: 'Please login or register to submit a review.',
                            showConfirmButton: true
                        });
                        return;
                    }
                    if (selectedRating === 0) {
                        Swal.fire({
                            icon: 'warning',
                            title: 'Rating Required',
                            text: 'Please select a star rating.',
                            showConfirmButton: true
                        });
                        return;
                    }

                    const reviewerName = document.getElementById('reviewerName').value;
                    const reviewerEmail = document.getElementById('reviewerEmail').value;
                    const reviewComment = document.getElementById('reviewComment').value;
                    const btn = this.querySelector('button[type="submit"]');
                    const btnText = btn.querySelector('.btn-text');
                    const spinner = btn.querySelector('.loading-spinner');

                    btnText.style.display = 'none';
                    spinner.style.display = 'block';

                    try {
                        await addDoc(collection(db, `artifacts/${appId}/public/data/reviews`), {
                            userId: userId, // Associate review with user
                            name: reviewerName,
                            email: reviewerEmail,
                            rating: selectedRating,
                            comment: reviewComment,
                            timestamp: serverTimestamp()
                        });

                        Swal.fire({
                            icon: 'success',
                            title: 'Review Submitted!',
                            text: 'Thank you for your feedback!',
                            timer: 2000,
                            showConfirmButton: false
                        });
                        document.getElementById('addReviewForm').reset();
                        selectedRating = 0; // Reset stars
                        document.querySelectorAll('#reviewRatingInput .star').forEach(s => s.classList.remove('selected', 'active'));
                        loadReviews(); // Reload reviews to show the new one
                    } catch (error) {
                        console.error("Error adding document: ", error);
                        Swal.fire({
                            icon: 'error',
                            title: 'Submission Failed',
                            text: 'Could not submit review. Please try again.',
                            showConfirmButton: true
                        });
                    } finally {
                        btnText.style.display = 'block';
                        spinner.style.display = 'none';
                    }
                });

            } // End initializeAppData

            // --- Firebase Firestore Functions ---

            // Function to load reviews from Firestore
            async function loadReviews() {
                const reviewsList = document.getElementById('reviewsList');
                reviewsList.innerHTML = '<p style="text-align: center; color: var(--muted-text); padding: 20px;">Loading reviews...</p>';

                try {
                    // Fetch reviews ordered by timestamp descending
                    const q = query(collection(db, `artifacts/${appId}/public/data/reviews`), orderBy("timestamp", "desc"));
                    const querySnapshot = await getDocs(q);
                    const reviews = [];
                    querySnapshot.forEach((doc) => {
                        reviews.push({ id: doc.id, ...doc.data() });
                    });

                    if (reviews.length === 0) {
                        reviewsList.innerHTML = '<p style="text-align: center; color: var(--muted-text); padding: 20px;">No reviews yet. Be the first to share your experience!</p>';
                    } else {
                        reviewsList.innerHTML = ''; // Clear loading message
                        reviews.forEach(review => {
                            const reviewItem = document.createElement('div');
                            reviewItem.className = 'review-item animate-slide-up'; // Add animation
                            const reviewDate = review.timestamp ? new Date(review.timestamp.toDate()).toLocaleDateString() : 'N/A';
                            reviewItem.innerHTML = `
                                <div class="review-header">
                                    <div class="reviewer-info">${review.name || 'Anonymous'}</div>
                                    <div class="review-stars">${'&#9733;'.repeat(review.rating)}<span style="color:#ccc;">${'&#9733;'.repeat(5 - review.rating)}</span></div>
                                </div>
                                <div class="review-comment">${review.comment}</div>
                                <div class="review-date">Reviewed on: ${reviewDate}</div>
                            `;
                            reviewsList.appendChild(reviewItem);
                        });
                    }
                } catch (error) {
                    console.error("Error loading reviews: ", error);
                    reviewsList.innerHTML = '<p style="text-align: center; color: var(--accent-color); padding: 20px;">Error loading reviews. Please try again later.</p>';
                }
            }


            // --- General Helper Functions (mostly from your original file, adapted) ---

            // Function to show welcome notification
            function showWelcomeNotification() {
                const welcomeNotification = document.getElementById('welcomeNotification');
                welcomeNotification.style.display = 'block';
                setTimeout(() => {
                    welcomeNotification.classList.remove('hide');
                }, 50); // Small delay to trigger animation
                setTimeout(() => {
                    welcomeNotification.classList.add('hide');
                    setTimeout(() => {
                        welcomeNotification.style.display = 'none';
                    }, 600); // After hide animation finishes
                }, 4000); // Show for 4 seconds
            }

            // Mock Product Data (replace with Firestore/backend in future)
            const products = [
                {
                    id: 'prd001',
                    name: 'Silver-Black Watch',
                    price: 3200,
                    oldPrice: 3500,
                    mainImage: 'https://gentselegance.com/wp-content/uploads/2025/03/Naviforce-8063-Silver-Black-Watch-For-Men.jpg',
                    thumbnails: [
                        'https://gentselegance.com/wp-content/uploads/2025/03/Naviforce-8063-Silver-Black-Watch-For-Men.jpg',
                        'https://gentselegance.com/wp-content/uploads/2025/03/Naviforce-8063-Silver-Black-Watch-For-Men-2.jpg',
                        'https://gentselegance.com/wp-content/uploads/2025/03/Naviforce-8063-Silver-Black-Watch-For-Men-3.jpg',
                        'https://images.unsplash.com/photo-1542479624-954f9a0c78a0?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
                    ],
                    description: 'High quality Naviforce silver-black watch for men. Durable, stylish, and perfect for formal occasions. Features include water resistance up to 50m, stainless steel case, and precise quartz movement.',
                    category: 'watches',
                    sku: 'WATCH-001',
                    brand: 'Naviforce',
                    availability: 'in_stock',
                    rating: 4.5,
                    badges: ['New', 'Bestseller']
                },
                {
                    id: 'prd002',
                    name: 'Luxury Watch',
                    price: 3200,
                    oldPrice: 3500,
                    mainImage: 'https://gentselegance.com/wp-content/uploads/2025/02/aolix-9196-luxury-watch-bangladesh-01.jpg',
                    thumbnails: [
                        'https://gentselegance.com/wp-content/uploads/2025/02/aolix-9196-luxury-watch-bangladesh-01.jpg',
                        'https://gentselegance.com/wp-content/uploads/2025/02/aolix-9196-luxury-watch-bangladesh-01-2.jpg',
                        'https://gentselegance.com/wp-content/uploads/2025/02/aolix-9196-luxury-watch-bangladesh-01-3.jpg'
                    ],
                    description: 'Aolix 9196 luxury wristwatch. Classy design with elegant finish. Perfect for gifts and celebrations. Features include genuine leather strap, mineral crystal glass, and precise Japanese movement.',
                    category: 'watches',
                    sku: 'WATCH-002',
                    brand: 'Aolix',
                    availability: 'in_stock',
                    rating: 4.2,
                    badges: ['Popular']
                },
                {
                    id: 'prd003',
                    name: 'Premium Punjabi',
                    price: 4000,
                    oldPrice: 4500,
                    mainImage: 'https://media.e-valy.com/cms/products/images/d9c8a4f4-c55d-467f-b973-014c58dc09ff',
                    thumbnails: [
                        'https://media.e-valy.com/cms/products/images/d9c8a4f4-c55d-467f-b973-014c58dc09ff',
                        'https://images.unsplash.com/photo-1594936458140-f421f1e31c8a?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                        'https://images.unsplash.com/photo-1594936458140-f421f1e31c8a?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
                    ],
                    description: 'Premium quality Punjabi made from 100% cotton. Comfortable for everyday wear with a premium feel. Available in multiple colors. Handcrafted with traditional embroidery patterns.',
                    category: 'men',
                    sku: 'MEN-001',
                    brand: 'Parijan',
                    availability: 'in_stock',
                    rating: 4.0,
                    badges: []
                },
                {
                    id: 'prd004',
                    name: 'Drop Shoulder T-shirt',
                    price: 4500,
                    oldPrice: 5000,
                    mainImage: 'https://i.imgur.com/RbjXbd4.jpg',
                    thumbnails: [
                        'https://i.imgur.com/RbjXbd4.jpg',
                        'https://sameerbeat.com/wp-content/uploads/2025/02/DSC09753-860x1076-2.jpg',
                        'https://sameerbeat.com/wp-content/uploads/2025/02/DSC09753-860x1076-3.jpg',
                        'https://images.unsplash.com/photo-1521572178988-cd0292c59ee6?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
                    ],
                    description: 'Stylish premium black Drop shoulder T-shirt for men with premium quality and durability. Made from high-quality cotton blend for maximum comfort. Available in sizes S-XXL.',
                    category: 'men',
                    sku: 'MEN-002',
                    brand: 'The Lightning',
                    availability: 'in_stock',
                    rating: 4.7,
                    badges: ['Bestseller']
                },
                {
                    id: 'prd005',
                    name: 'Cargo Pant',
                    price: 3600,
                    oldPrice: 4000,
                    mainImage: 'https://down-ph.img.susercontent.com/file/ph-11134207-7rasf-m1m3n0gtgji63d',
                    thumbnails: [
                        'https://down-ph.img.susercontent.com/file/ph-11134207-7rasf-m1m3n0gtgji63d',
                        'https://images.unsplash.com/photo-1594936458140-f421f1e31c8a?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                        'https://images.unsplash.com/photo-1594936458140-f421f1e31c8a?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
                    ],
                    description: '6 pocket cargo pant in cream color. Made with premium quality cotton blend fabric for durability and comfort. Features adjustable waistband and reinforced stitching. Available in sizes 28-40.',
                    category: 'men',
                    sku: 'MEN-003',
                    brand: 'The Lightning',
                    availability: 'in_stock',
                    rating: 4.3,
                    badges: []
                },
                {
                    id: 'prd006',
                    name: 'Luis Vuitton Cap',
                    price: 899,
                    oldPrice: 1200,
                    mainImage: 'https://lukazshop.com/wp-content/uploads/2025/02/IMG_2079-4-450x450.webp',
                    thumbnails: [
                        'https://lukazshop.com/wp-content/uploads/2025/02/IMG_2079-4-450x450.webp',
                        'https://images.unsplash.com/photo-1582239460010-09675276536b?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                        'https://images.unsplash.com/photo-1534015694246-17b0d911b30d?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
                    ],
                    description: 'A premium quality cap which makes your look stylish and smart. Adjustable strap for perfect fit. Made from high-quality materials with authentic Luis Vuitton pattern. One size fits all.',
                    category: 'accessories',
                    sku: 'ACC-001',
                    brand: 'LV',
                    availability: 'in_stock',
                    rating: 4.0,
                    badges: ['Sale']
                },
                {
                    id: 'prd007',
                    name: 'Polo Parijan',
                    price: 5999,
                    oldPrice: 6999,
                    mainImage: 'https://i.imgur.com/yCuNAJr.png', // Reusing from banner for mock
                    thumbnails: [
                        'https://i.imgur.com/yCuNAJr.png',
                        'https://images.unsplash.com/photo-1520626359288-d2aa49d10e53?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                        'https://images.unsplash.com/photo-1583723380486-5062a4d3f3f5?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
                    ],
                    description: 'Imported and premium polo from Parijan. Made from 100% premium cotton with moisture-wicking technology. Features reinforced stitching and classic collar design. Available in sizes S-XXL in multiple colors.',
                    category: 'men',
                    sku: 'MEN-004',
                    brand: 'Parijan',
                    availability: 'in_stock',
                    rating: 4.6,
                    badges: ['Limited']
                },
                {
                    id: 'prd008',
                    name: 'Cargo Jeans',
                    price: 2090,
                    oldPrice: 2500,
                    mainImage: 'https://i.imgur.com/MI6O4Fg.png',
                    thumbnails: [
                        'https://i.imgur.com/MI6O4Fg.png',
                        'https://images.unsplash.com/photo-1594936458140-f421f1e31c8a?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                        'https://images.unsplash.com/photo-1594936458140-f421f1e31c8a?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
                    ],
                    description: 'High-quality cargo jeans with multiple pockets for functionality and style. Made from durable denim with stretch technology for comfort. Available in multiple washes and sizes 28-40.',
                    category: 'men',
                    sku: 'MEN-005',
                    brand: 'The Lightning',
                    availability: 'in_stock',
                    rating: 4.1,
                    badges: []
                },
                {
                    id: 'prd009',
                    name: 'Canvas Shoes',
                    price: 1800,
                    oldPrice: 2200,
                    mainImage: 'https://i.imgur.com/o8ZQlTy.jpg',
                    thumbnails: [
                        'https://i.imgur.com/o8ZQlTy.jpg',
                        'https://images.unsplash.com/photo-1549298828-5a0279d1a3c7?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                        'https://images.unsplash.com/photo-1606757388701-d00d41f3d875?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
                    ],
                    description: 'Premium canvas shoes with rubber sole for maximum comfort. Lightweight and breathable design perfect for casual wear. Available in multiple colors and sizes 6-12.',
                    category: 'footwear',
                    sku: 'FTW-001',
                    brand: 'Generic',
                    availability: 'in_stock',
                    rating: 4.4,
                    badges: []
                },
                {
                    id: 'prd010',
                    name: 'Budget Wristband',
                    price: 999,
                    oldPrice: 1200,
                    mainImage: 'https://lukazshop.com/wp-content/uploads/2025/02/IMG_2079-2-450x450.webp',
                    thumbnails: [
                        'https://lukazshop.com/wp-content/uploads/2025/02/IMG_2079-2-450x450.webp',
                        'https://images.unsplash.com/photo-1548651877-c99b82a72064?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                        'https://images.unsplash.com/photo-1548651877-c99b82a72064?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
                    ],
                    description: 'Stylish and budget-friendly wristband. Best for daily wear and youth fashion. Made from high-quality silicone that is durable and comfortable for all-day wear. Available in multiple colors.',
                    category: 'accessories',
                    sku: 'ACC-002',
                    brand: 'Generic',
                    availability: 'in_stock',
                    rating: 4.0,
                    badges: ['New']
                }
            ];

            // Function to render products dynamically
            function renderProducts(filteredProducts = products) {
                const productGrid = document.getElementById('productGrid');
                productGrid.innerHTML = ''; // Clear existing products

                filteredProducts.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card animate-slide-up'; // Add animation
                    productCard.dataset.productId = product.id; // Store ID for easy lookup
                    productCard.dataset.category = product.category;
                    productCard.dataset.brand = product.brand;
                    productCard.dataset.price = product.price;
                    productCard.dataset.availability = product.availability;
                    productCard.dataset.rating = product.rating;

                    const badgesHtml = product.badges.map(badge => `<div class="product-badge">${badge}</div>`).join('');
                    const oldPriceHtml = product.oldPrice ? `<span class="old-price">${product.oldPrice} BDT</span>` : '';
                    const isWishlisted = wishlist.some(item => item.id === product.id) ? 'active' : '';
                    const heartIcon = isWishlisted ? 'fas fa-heart' : 'far fa-heart';

                    productCard.innerHTML = `
                        ${badgesHtml}
                        <button class="wishlist-btn ${isWishlisted}" data-product-id="${product.id}">
                            <i class="${heartIcon}"></i>
                        </button>
                        <div class="product-image">
                            <img src="${product.mainImage}" alt="${product.name}">
                            <div class="quick-view-btn" data-product-id="${product.id}">
                                Quick View
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">${product.name}</h3>
                            <p class="product-description">${product.description}</p>
                            <div class="product-price">${product.price} BDT ${oldPriceHtml}</div>
                            <div class="product-actions">
                                <button class="add-to-cart-btn" data-product-id="${product.id}">
                                    <i class="fas fa-shopping-cart"></i> Add to Cart
                                </button>
                                <a href="https://wa.me/8801874580941?text=I'm%20interested%20in%20${encodeURIComponent(product.name)}%20(${product.price}%20BDT)" target="_blank" class="order-btn">
                                    <i class="fas fa-bolt"></i> Buy Now
                                </a>
                            </div>
                        </div>
                    `;
                    productGrid.appendChild(productCard);
                });
            }

            // Function to dynamically generate filter options
            function renderFilterOptions() {
                const categories = [...new Set(products.map(p => p.category))];
                const brands = [...new Set(products.map(p => p.brand))];

                const categoryFilterContainer = document.getElementById('categoryFilter');
                categoryFilterContainer.innerHTML = '';
                categories.forEach(cat => {
                    const option = document.createElement('div');
                    option.className = 'filter-option';
                    option.innerHTML = `
                        <label>
                            <input type="checkbox" name="category" value="${cat}" checked> ${cat.replace(/_/g, ' ').split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')}
                        </label>
                    `;
                    categoryFilterContainer.appendChild(option);
                });

                const brandFilterContainer = document.getElementById('brandFilter');
                brandFilterContainer.innerHTML = '';
                brands.forEach(brand => {
                    const option = document.createElement('div');
                    option.className = 'filter-option';
                    option.innerHTML = `
                        <label>
                            <input type="checkbox" name="brand" value="${brand}" checked> ${brand.replace(/_/g, ' ').split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')}
                        </label>
                    `;
                    brandFilterContainer.appendChild(option);
                });
            }


            // Function to open product modal (Quick View)
            function openProductModal(product) {
                const modal = document.getElementById('productModal');
                document.getElementById('modalProductTitle').textContent = product.name;
                document.getElementById('modalProductPrice').textContent = product.price + ' BDT';
                document.getElementById('modalOldPrice').textContent = product.oldPrice ? product.oldPrice + ' BDT' : '';
                document.getElementById('mainProductImage').src = product.mainImage;
                document.getElementById('modalProductDescription').textContent = product.description;

                document.getElementById('modalCategory').textContent = product.category.replace(/_/g, ' ').split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
                document.getElementById('modalSKU').textContent = product.sku;
                document.getElementById('modalBrand').textContent = product.brand;
                document.getElementById('modalAvailability').textContent = product.availability === 'in_stock' ? 'In Stock' : 'Out of Stock';

                // Set product ID for modal's buttons
                document.getElementById('productModal').querySelector('.add-to-cart-btn-modal').dataset.productId = product.id;
                document.getElementById('modalWishlistBtn').dataset.productId = product.id;


                // Set up thumbnails
                const thumbnailsContainer = document.getElementById('productThumbnails');
                thumbnailsContainer.innerHTML = '';
                product.thumbnails.forEach(src => {
                    const thumbnail = document.createElement('img');
                    thumbnail.src = src;
                    thumbnail.classList.add('thumbnail');
                    thumbnail.addEventListener('click', function() {
                        document.getElementById('mainProductImage').src = src;
                        document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
                        this.classList.add('active');
                    });
                    thumbnailsContainer.appendChild(thumbnail);
                });
                // Set first thumbnail as active by default
                if (thumbnailsContainer.children.length > 0) {
                    thumbnailsContainer.children[0].classList.add('active');
                }

                // Check if product is in wishlist for modal button
                const wishlistBtnModal = document.getElementById('modalWishlistBtn');
                if (wishlist.some(item => item.id === product.id)) {
                    wishlistBtnModal.classList.add('active');
                    wishlistBtnModal.innerHTML = '<i class="fas fa-heart"></i>';
                } else {
                    wishlistBtnModal.classList.remove('active');
                    wishlistBtnModal.innerHTML = '<i class="far fa-heart"></i>';
                }

                openModal('productModal');
            }


            // Function to add product to cart
            function addToCart(product) {
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                const existingItem = cart.find(item => item.id === product.id);

                if (existingItem) {
                    existingItem.quantity += product.quantity || 1;
                } else {
                    cart.push({
                        id: product.id,
                        name: product.name,
                        price: product.price,
                        image: product.mainImage, // Use main image for cart
                        quantity: product.quantity || 1
                    });
                }

                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                renderCartItems();

                Swal.fire({
                    icon: 'success',
                    title: 'Added to Cart',
                    text: `${product.name} has been added to your cart`,
                    timer: 1500,
                    showConfirmButton: false
                });

                sendNotification('Product added to cart', `${product.name} - ${product.price} BDT`);
            }

            // Function to toggle product in wishlist
            function toggleWishlist(buttonElement, product) {
                let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
                const existingIndex = wishlist.findIndex(item => item.id === product.id);

                if (existingIndex !== -1) {
                    wishlist.splice(existingIndex, 1);
                    buttonElement.classList.remove('active');
                    buttonElement.innerHTML = '<i class="far fa-heart"></i>';

                    Swal.fire({
                        icon: 'success',
                        title: 'Removed from Wishlist',
                        text: `${product.name} has been removed from your wishlist`,
                        timer: 1500,
                        showConfirmButton: false
                    });
                } else {
                    wishlist.push({
                        id: product.id,
                        name: product.name,
                        price: product.price,
                        image: product.mainImage
                    });
                    buttonElement.classList.add('active');
                    buttonElement.innerHTML = '<i class="fas fa-heart"></i>';

                    Swal.fire({
                        icon: 'success',
                        title: 'Added to Wishlist',
                        text: `${product.name} has been added to your wishlist`,
                        timer: 1500,
                        showConfirmButton: false
                    });
                }

                localStorage.setItem('wishlist', JSON.stringify(wishlist));
                updateWishlistCount();
                renderWishlistItems();

                sendNotification('Product wishlist update', `${product.name} - ${existingIndex !== -1 ? 'Removed' : 'Added'}`);
            }

            // Function to update cart count
            function updateCartCount() {
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                const totalItems = cart.reduce((total, item) => total + item.quantity, 0);

                document.getElementById('cartCount').textContent = totalItems;
                document.getElementById('floatingCartCount').textContent = totalItems;
            }

            // Function to update wishlist count
            function updateWishlistCount() {
                const wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
                document.getElementById('wishlistCount').textContent = wishlist.length;
            }

            // Function to render cart items in sidebar
            function renderCartItems() {
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                const cartItemsContainer = document.getElementById('cartItems');
                const cartTotalElement = document.getElementById('cartTotal');

                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = `
                        <div class="empty-cart-message animate-fade">
                            <i class="fas fa-shopping-cart"></i>
                            <p>Your cart is empty</p>
                            <button class="continue-shopping-btn"><i class="fas fa-arrow-left"></i> Continue Shopping</button>
                        </div>
                    `;
                    cartTotalElement.textContent = '0 BDT';
                } else {
                    cartItemsContainer.innerHTML = '';
                    let total = 0;

                    cart.forEach((item, index) => {
                        total += item.price * item.quantity;

                        const cartItem = document.createElement('div');
                        cartItem.className = 'cart-item animate-slide-up'; // Add animation
                        cartItem.innerHTML = `
                            <img src="${item.image}" alt="${item.name}" class="cart-item-img">
                            <div class="cart-item-details">
                                <h4 class="cart-item-title">${item.name}</h4>
                                <div class="cart-item-price">${item.price} BDT</div>
                                <div class="cart-item-actions">
                                    <div class="quantity-control-cart">
                                        <button class="quantity-btn-cart minus" data-index="${index}">-</button>
                                        <input type="number" value="${item.quantity}" min="1" class="quantity-input-cart" data-index="${index}">
                                        <button class="quantity-btn-cart plus" data-index="${index}">+</button>
                                    </div>
                                    <button class="remove-item-btn" data-index="${index}">
                                        <i class="fas fa-trash"></i> Remove
                                    </button>
                                </div>
                            </div>
                        `;
                        cartItemsContainer.appendChild(cartItem);
                    });

                    cartTotalElement.textContent = total.toFixed(2) + ' BDT';

                    // Attach event listeners for dynamically created elements
                    cartItemsContainer.querySelectorAll('.quantity-btn-cart.minus').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const index = parseInt(this.dataset.index);
                            const input = cartItemsContainer.querySelector(`.quantity-input-cart[data-index="${index}"]`);
                            if (parseInt(input.value) > 1) {
                                input.value = parseInt(input.value) - 1;
                                updateCartItem(index, parseInt(input.value));
                            }
                        });
                    });
                    cartItemsContainer.querySelectorAll('.quantity-btn-cart.plus').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const index = parseInt(this.dataset.index);
                            const input = cartItemsContainer.querySelector(`.quantity-input-cart[data-index="${index}"]`);
                            input.value = parseInt(input.value) + 1;
                            updateCartItem(index, parseInt(input.value));
                        });
                    });
                    cartItemsContainer.querySelectorAll('.quantity-input-cart').forEach(input => {
                        input.addEventListener('change', function() {
                            const index = parseInt(this.dataset.index);
                            if (parseInt(this.value) < 1) {
                                this.value = 1;
                            }
                            updateCartItem(index, parseInt(this.value));
                        });
                    });
                    cartItemsContainer.querySelectorAll('.remove-item-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            removeCartItem(parseInt(this.dataset.index));
                        });
                    });
                }
            }

            // Function to update cart item quantity
            function updateCartItem(index, newQuantity) {
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                if (index >= 0 && index < cart.length) {
                    cart[index].quantity = newQuantity;
                    localStorage.setItem('cart', JSON.stringify(cart));
                    renderCartItems(); // Re-render to update total and display
                    updateCartCount();
                }
            }

            // Function to remove item from cart
            function removeCartItem(index) {
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                if (index >= 0 && index < cart.length) {
                    const removedItem = cart.splice(index, 1)[0];
                    localStorage.setItem('cart', JSON.stringify(cart));
                    renderCartItems();
                    updateCartCount();

                    Swal.fire({
                        icon: 'success',
                        title: 'Removed from Cart',
                        text: `${removedItem.name} has been removed from your cart`,
                        timer: 1500,
                        showConfirmButton: false
                    });
                }
            }

            // Function to render wishlist items in sidebar
            function renderWishlistItems() {
                const wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
                const wishlistItemsContainer = document.getElementById('wishlistItems');

                if (wishlist.length === 0) {
                    wishlistItemsContainer.innerHTML = `
                        <div class="empty-wishlist-message animate-fade">
                            <i class="far fa-heart"></i>
                            <p>Your wishlist is empty</p>
                            <button class="continue-shopping-btn"><i class="fas fa-arrow-left"></i> Continue Shopping</button>
                        </div>
                    `;
                } else {
                    wishlistItemsContainer.innerHTML = '';

                    wishlist.forEach((item, index) => {
                        const wishlistItem = document.createElement('div');
                        wishlistItem.className = 'wishlist-item animate-slide-up'; // Add animation
                        wishlistItem.innerHTML = `
                            <img src="${item.image}" alt="${item.name}" class="wishlist-item-img">
                            <div class="wishlist-item-details">
                                <h4 class="wishlist-item-title">${item.name}</h4>
                                <div class="wishlist-item-price">${item.price} BDT</div>
                                <div class="wishlist-item-actions">
                                    <button class="add-to-cart-from-wishlist" data-index="${index}">
                                        <i class="fas fa-shopping-cart"></i> Add to Cart
                                    </button>
                                    <button class="remove-from-wishlist" data-index="${index}">
                                        <i class="fas fa-trash"></i> Remove
                                    </button>
                                </div>
                            </div>
                        `;
                        wishlistItemsContainer.appendChild(wishlistItem);

                        // Attach event listeners for dynamically created elements
                        wishlistItem.querySelector('.add-to-cart-from-wishlist').addEventListener('click', function() {
                            addToCart(wishlist[parseInt(this.dataset.index)]);
                        });

                        wishlistItem.querySelector('.remove-from-wishlist').addEventListener('click', function() {
                            removeWishlistItem(parseInt(this.dataset.index));
                        });
                    });
                }
            }

            // Function to remove item from wishlist
            function removeWishlistItem(index) {
                let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
                if (index >= 0 && index < wishlist.length) {
                    const removedItem = wishlist.splice(index, 1)[0];
                    localStorage.setItem('wishlist', JSON.stringify(wishlist));
                    renderWishlistItems();
                    updateWishlistCount();

                    // Update wishlist button in product grid
                    document.querySelectorAll(`.wishlist-btn[data-product-id="${removedItem.id}"]`).forEach(btn => {
                        btn.classList.remove('active');
                        btn.innerHTML = '<i class="far fa-heart"></i>';
                    });

                    Swal.fire({
                        icon: 'success',
                        title: 'Removed from Wishlist',
                        text: `${removedItem.name} has been removed from your wishlist`,
                        timer: 1500,
                        showConfirmButton: false
                    });
                }
            }

            // Function to open cart sidebar
            function openCartSidebar() {
                renderCartItems();
                document.getElementById('cartSidebar').classList.add('open');
                document.getElementById('overlay').classList.add('show');
                document.body.style.overflow = 'hidden'; // Prevent body scroll
            }

            // Function to close cart sidebar
            function closeCartSidebar() {
                document.getElementById('cartSidebar').classList.remove('open');
                document.getElementById('overlay').classList.remove('show');
                document.body.style.overflow = 'auto'; // Restore body scroll
            }

            // Function to open wishlist sidebar
            function openWishlistSidebar() {
                renderWishlistItems();
                document.getElementById('wishlistSidebar').classList.add('open');
                document.getElementById('overlay').classList.add('show');
                document.body.style.overflow = 'hidden';
            }

            // Function to close wishlist sidebar
            function closeWishlistSidebar() {
                document.getElementById('wishlistSidebar').classList.remove('open');
                document.getElementById('overlay').classList.remove('show');
                document.body.style.overflow = 'auto';
            }

            // Function to open any modal
            function openModal(modalId) {
                document.getElementById(modalId).classList.add('show');
                document.getElementById('overlay').classList.add('show');
                document.body.style.overflow = 'hidden';
            }

            // Function to close any modal
            function closeModal(modalId) {
                document.getElementById(modalId).classList.remove('show');
                document.getElementById('overlay').classList.remove('show');
                document.body.style.overflow = 'auto';
            }

            // Function to apply filters
            function applyFilters() {
                const selectedCategories = Array.from(document.querySelectorAll('#categoryFilter input[name="category"]:checked')).map(el => el.value);
                const selectedBrands = Array.from(document.querySelectorAll('#brandFilter input[name="brand"]:checked')).map(el => el.value);
                const selectedAvailability = Array.from(document.querySelectorAll('input[name="availability"]:checked')).map(el => el.value);
                const minPrice = parseFloat(document.getElementById('minPrice').value) || 0;
const maxPrice = parseFloat(document.getElementById('maxPrice').value) || Infinity; // Use Infinity for no upper limit

                const products = document.querySelectorAll('.product-card'); // Assuming product cards have this class

                products.forEach(product => {
                    const productCategory = product.dataset.category;
                    const productBrand = product.dataset.brand;
                    const productAvailability = product.dataset.availability; // e.g., "in-stock", "out-of-stock"
                    const productPrice = parseFloat(product.dataset.price);

                    const isCategoryMatch = selectedCategories.length === 0 || selectedCategories.includes(productCategory);
                    const isBrandMatch = selectedBrands.length === 0 || selectedBrands.includes(productBrand);
                    const isAvailabilityMatch = selectedAvailability.length === 0 || selectedAvailability.includes(productAvailability);
                    const isPriceMatch = productPrice >= minPrice && productPrice <= maxPrice;

                    if (isCategoryMatch && isBrandMatch && isAvailabilityMatch && isPriceMatch) {
                        product.style.display = 'block'; // Show the product
                    } else {
                        product.style.display = 'none'; // Hide the product
                    }
                });
            }

            // Event listeners for filters (assuming you have filter elements with IDs/classes)
            document.querySelectorAll('#categoryFilter input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', applyFilters);
            });

            document.querySelectorAll('#brandFilter input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', applyFilters);
            });

            document.querySelectorAll('input[name="availability"]').forEach(radio => {
                radio.addEventListener('change', applyFilters);
            });

            document.getElementById('minPrice').addEventListener('input', applyFilters);
            document.getElementById('maxPrice').addEventListener('input', applyFilters);

            // Initial application of filters on page load
            document.addEventListener('DOMContentLoaded', applyFilters);

            // --- END Filter Functions ---

            // --- Modal Functions (from your provided content) ---
            function openFilterModal() {
                document.getElementById('filterModal').classList.add('show');
                document.getElementById('overlay').classList.add('show');
                document.body.style.overflow = 'hidden';
            }

            function closeFilterModal() {
                document.getElementById('filterModal').classList.remove('show');
                document.getElementById('overlay').classList.remove('show');
                document.body.style.overflow = 'auto';
            }

            // Function to open any modal (re-provided for completeness, assuming existing usage)
            function openModal(modalId) {
                document.getElementById(modalId).classList.add('show');
                document.getElementById('overlay').classList.add('show');
                document.body.style.overflow = 'hidden';
// Quick View Modal - dynamically load product data
function openQuickView(productId) {
    const product = productsData.find(p => p.id === productId);
    if (!product) return;

    const modal = document.getElementById('productModal');
    const modalTitle = modal.querySelector('.product-modal-details h2');
    const modalPrice = modal.querySelector('.product-modal-details .product-price');
    const modalDescription = modal.querySelector('.product-modal-details p');
    const mainImage = modal.querySelector('.main-product-image');
    const thumbnails = modal.querySelector('.product-thumbnails');

    modalTitle.textContent = product.name;
    modalPrice.innerHTML = `${product.price} <span class="old-price">${product.oldPrice}</span>`;
    modalDescription.textContent = product.description || "No description available.";
    mainImage.src = product.images[0];

    // Clear existing thumbnails
    thumbnails.innerHTML = '';

    // Add new thumbnails
    product.images.forEach((img, index) => {
        const thumb = document.createElement('img');
        thumb.src = img;
        thumb.classList.add('thumbnail');
        if (index === 0) thumb.classList.add('active');
        thumb.onclick = () => {
            mainImage.src = img;
            thumbnails.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
            thumb.classList.add('active');
        };
        thumbnails.appendChild(thumb);
    });

    openModal('productModal');
}


            // Function to close any modal (re-provided for completeness, assuming existing usage)
            function closeModal(modalId) {
                document.getElementById(modalId).classList.remove('show');
                document.getElementById('overlay').classList.remove('show');
                document.body.style.overflow = 'auto';
            }
</script>
</body>
</html>
